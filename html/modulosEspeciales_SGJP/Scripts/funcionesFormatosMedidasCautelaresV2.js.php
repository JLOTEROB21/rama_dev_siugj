<?php
	session_start();
	include("configurarIdiomaJS.php");
	include("conexionBD.php");
	
	$idCarpeta=$_GET["iC"];
	$carpetaAdministrativa=$_GET["c"];
	
	
	$consulta="SELECT e.fechaEvento FROM 3013_registroResolutivosAudiencia r,7007_contenidosCarpetaAdministrativa con,7000_eventosAudiencia e
			 WHERE tipoResolutivo=50 AND e.idRegistroEvento=r.idEvento AND con.tipoContenido=3 AND r.idRegistro=con.idRegistroContenidoReferencia
			 AND con.carpetaAdministrativa='".$carpetaAdministrativa."'";
	$fechaVinculacion=$con->obtenerValor($consulta);			 
	
	
	$consulta="SELECT idRegistroEvento,
			concat(date_format(fechaEvento,'%d/%m/%Y'),' - ',date_format(horaInicioEvento,'%H:%i'),' ',(SELECT tipoAudiencia FROM _4_tablaDinamica WHERE id__4_tablaDinamica=e.tipoAudiencia)) AS etAudiencia,
			fechaEvento,horaInicioEvento, 
			(SELECT replace(tipoAudiencia,'audiencia ','') FROM _4_tablaDinamica WHERE id__4_tablaDinamica=e.tipoAudiencia) as tAudiencia,
			(SELECT replace(nombreSala,'Sala ','') FROM _15_tablaDinamica WHERE id__15_tablaDinamica=e.idSala) as sala
			FROM 7000_eventosAudiencia e,7007_contenidosCarpetaAdministrativa c 
			WHERE c.carpetaAdministrativa='".$carpetaAdministrativa."' and c.idCarpetaAdministrativa in (-1,".$idCarpeta.
			") AND c.tipoContenido=3 AND c.idRegistroContenidoReferencia=e.idRegistroEvento 
			AND e.situacion IN(0,1,2,4,5)  ORDER BY e.fechaEvento DESC,e.horaInicioEvento DESC";
	
	$arrAudienciasCarpeta=$con->obtenerFilasArreglo($consulta);
	
	$consulta="SELECT codigoUnidad,unidad FROM 817_organigrama WHERE codigoUnidad IN('00020001','00020002','00020003','00020001','00020008') ORDER BY unidad";
	$arrCentroReclusion=$con->obtenerFilasArreglo($consulta);
	
	
	$consulta="SELECT distinct usuarioJuez,u.Nombre FROM _26_tablaDinamica j,800_usuarios u WHERE u.idUsuario=j.usuarioJuez ORDER BY u.Nombre";
	$arrJuecesGlobal=$con->obtenerFilasArreglo($consulta);
?>
var arrJuecesGlobal=<?php echo $arrJuecesGlobal?>;
var arrCentroReclusion=<?php echo $arrCentroReclusion?>;
var arrAudienciasCarpetaV2=<?php echo $arrAudienciasCarpeta?>;
var fechaVinculacion='<?php echo $fechaVinculacion?>';

function mostrarInterfaceParametrosOficio_1(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,185,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:215,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Registro de Antecedentes',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_1A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,185,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:215,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Registro de Antecedentes',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_1_1(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,185,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:215,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Registro de Antecedentes',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}


function mostrarInterfaceParametrosOficio_1_1A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,185,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:215,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Registro de Antecedentes',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_2(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,215,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,245,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,185,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,185,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Imputados:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>T&eacute;rmino Constitucional:</b>'
                                                                                                },
                                                                                                {
                                                                                                	x:160,
                                                                                                    y:155,
                                                                                                    width:80,
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    id:'txtTerminoConstitucional'
                                                                                                },
                                                                                                {
                                                                                                    x:250,
                                                                                                    y:160,
                                                                                                    html:'<b>hrs.</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Presentaci&oacute;n de imputado ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:185,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:185,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:250,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:280,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:275,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Medidas Cautelares',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las medidas cautelares que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosMCAdultosV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Imposición de medidas cautelares',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var txtTerminoConstitucional=gEx('txtTerminoConstitucional');
                                                                        if(txtTerminoConstitucional.getValue()=='')
                                                                        {
                                                                        	function resp21()
                                                                            {
                                                                            	txtTerminoConstitucional.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar el t&eacute;rmino constitucional',resp21);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el imputado debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el imputado debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el imputado debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el imputado debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaMedidas='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gMedidaCautelar').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gMedidaCautelar').getStore().getAt(x);
                                                                            o='{"idMedidaCautelar":"'+fila.data.idMedidaCautelar+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaMedidas=='')
                                                                            	listaMedidas=o;
                                                                            else
                                                                            	listaMedidas+=','+o
                                                                        }
                                                                        
                                                                        
                                                                        if(listaMedidas=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+
                                                                                            '","terminoConstitucional":"'+txtTerminoConstitucional.getValue()+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function crearGridRegistrosMCAdultosV2()
{
	var dsDatos=[];
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                                    {name: 'idMedidaCautelar'},
                                                                    {name: 'detallesAdicionales'}
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	var chkRow=new Ext.grid.CheckboxSelectionModel();
	
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														chkRow,
														{
															header:'Medida cautelar',
															width:250,
															sortable:true,
															dataIndex:'idMedidaCautelar',
                                                            renderer:function(val,meta,registro)
                                                            				{
                                                                            	meta.attr='style="min-height:21px; height:auto; white-space: normal;"';
                                                                            	return formatearValorRenderer(arrMedidasCautelaresAdultoOTRO,val);
                                                                            }
														},
														{
															header:'Detalles adicionales',
															width:300,
															sortable:true,
															dataIndex:'detallesAdicionales',
                                                            renderer:function(val,meta,registro)
                                                            				{
                                                                            	meta.attr='style="min-height:21px; height:auto; white-space: normal;"';
                                                                            	return val;
                                                                            }
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            
                                                            store:alDatos,
                                                            frame:false,
                                                            x:10,
                                                            y:10,
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            id:'gMedidaCautelar',
                                                            columnLines : true,
                                                            height:290,
                                                            width:750,
                                                            sm:chkRow,
                                                            tbar:	[
                                                            			{
                                                                        	icon:'../images/add.png',
                                                                            cls:'x-btn-text-icon',
                                                                            text:'Agregar medida cautelar',
                                                                            handler:function()
                                                                            		{
                                                                                    	mostrarVentanaAgregarMedidaAdultos();
                                                                                    }
                                                                            
                                                                        },'-',
                                                                        {
                                                                        	icon:'../images/delete.png',
                                                                            cls:'x-btn-text-icon',
                                                                            text:'Remover medida cautelar',
                                                                            handler:function()
                                                                            		{
                                                                                    	var filas=tblGrid.getSelectionModel().getSelections();
                                                                                        if(filas.length==0)
                                                                                        {
                                                                                        	msgBox('Debe seleccionar la medida cautelar que desea remover');
                                                                                            
                                                                                        	return;
                                                                                        }
                                                                                        
                                                                                        tblGrid.getStore().removeAll(filas);
                                                                                        
                                                                                        
                                                                                        
                                                                                    }
                                                                            
                                                                        }
                                                                        
                                                            		]
                                                        }
                                                    );
	return 	tblGrid;
}


function mostrarInterfaceParametrosOficio_2A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,215,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,245,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,185,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,185,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Menores:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>T&eacute;rmino Constitucional:</b>'
                                                                                                },
                                                                                                {
                                                                                                	x:160,
                                                                                                    y:155,
                                                                                                    width:80,
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    id:'txtTerminoConstitucional'
                                                                                                },
                                                                                                {
                                                                                                    x:250,
                                                                                                    y:160,
                                                                                                    html:'<b>hrs.</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Presentaci&oacute;n de menor ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:185,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:185,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:250,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:280,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:275,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Medidas Cautelares',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las medidas cautelares que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosMCAdolescentesV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Imposición de medidas cautelares',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var txtTerminoConstitucional=gEx('txtTerminoConstitucional');
                                                                        if(txtTerminoConstitucional.getValue()=='')
                                                                        {
                                                                        	function resp21()
                                                                            {
                                                                            	txtTerminoConstitucional.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar el t&eacute;rmino constitucional',resp21);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el imputado debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el imputado debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el imputado debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el imputado debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaMedidas='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gMedidaCautelar').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gMedidaCautelar').getStore().getAt(x);
                                                                            o='{"idMedidaCautelar":"'+fila.data.idMedidaCautelar+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaMedidas=='')
                                                                            	listaMedidas=o;
                                                                            else
                                                                            	listaMedidas+=','+o
                                                                        }
                                                                        
                                                                        
                                                                        if(listaMedidas=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+
                                                                                            '","terminoConstitucional":"'+txtTerminoConstitucional.getValue()+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function crearGridRegistrosMCAdolescentesV2()
{
	var dsDatos=[];
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                                    {name: 'idMedidaCautelar'},
                                                                    {name: 'detallesAdicionales'}
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	var chkRow=new Ext.grid.CheckboxSelectionModel();
	
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														chkRow,
														{
															header:'Medida cautelar',
															width:250,
															sortable:true,
															dataIndex:'idMedidaCautelar',
                                                            renderer:function(val,meta,registro)
                                                            				{
                                                                            	meta.attr='style="min-height:21px; height:auto; white-space: normal;"';
                                                                            	return formatearValorRenderer(arrMedidasCautelaresAdolescentesOTRO,val);
                                                                            }
														},
														{
															header:'Detalles adicionales',
															width:300,
															sortable:true,
															dataIndex:'detallesAdicionales',
                                                            renderer:function(val,meta,registro)
                                                            				{
                                                                            	meta.attr='style="min-height:21px; height:auto; white-space: normal;"';
                                                                            	return val;
                                                                            }
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            
                                                            store:alDatos,
                                                            frame:false,
                                                            x:10,
                                                            y:10,
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            id:'gMedidaCautelar',
                                                            columnLines : true,
                                                            height:290,
                                                            width:700,
                                                            sm:chkRow,
                                                            tbar:	[
                                                            			{
                                                                        	icon:'../images/add.png',
                                                                            cls:'x-btn-text-icon',
                                                                            text:'Agregar medida cautelar',
                                                                            handler:function()
                                                                            		{
                                                                                    	mostrarVentanaAgregarMedidaAdolescentes();
                                                                                    }
                                                                            
                                                                        },'-',
                                                                        {
                                                                        	icon:'../images/delete.png',
                                                                            cls:'x-btn-text-icon',
                                                                            text:'Remover medida cautelar',
                                                                            handler:function()
                                                                            		{
                                                                                    	var filas=tblGrid.getSelectionModel().getSelections();
                                                                                        if(filas.length==0)
                                                                                        {
                                                                                        	msgBox('Debe seleccionar la medida cautelar que desea remover');
                                                                                            
                                                                                        	return;
                                                                                        }
                                                                                        
                                                                                        tblGrid.getStore().removeAll(filas);
                                                                                        
                                                                                        
                                                                                        
                                                                                    }
                                                                            
                                                                        }
                                                                        
                                                            		]
                                                        }
                                                    );
	return 	tblGrid;
}

function mostrarVentanaAgregarMedidaAdolescentes()
{
	var cmbMedida=crearComboExt('cmbMedida',arrMedidasCautelaresAdolescentesOTRO,120,5,350);
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'Medida Cautelar:'
                                                        },
                                                        cmbMedida,
                                                        {
                                                        	x:10,
                                                            y:40,
                                                            html:'Detalles adicionales:'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            width:500,
                                                            height:60,
                                                            xtype:'textarea',
                                                            id:'txtDetalles'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Agregar medida cautelar',
										width: 550,
										height:250,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var cmbMedida=gEx('cmbMedida');
                                                                        if(cmbMedida.getValue()==='')
                                                                        {
                                                                        	function resp()
                                                                            {
                                                                            	cmbMedida.focus();
                                                                            }
                                                                            msgConfirm('Debe selecciona la medida cautelar que desea agregar',resp);
                                                                            return;                                                                            
                                                                        }
                                                                        
                                                                        var reg=crearRegistro (
                                                                        							[
                                                                                                        {name: 'idMedidaCautelar'},
                                                                                                    	{name: 'detallesAdicionales'}
                                                                                                    ]
                                                                                              )
                                                                        
                                                                        var r=new reg(	
                                                                        				{
                                                                                        	idMedidaCautelar:cmbMedida.getValue(),
                                                                                            detallesAdicionales: gEx('txtDetalles').getValue()
                                                                        				}
                                                                                      )                      
                                                                        gEx('gMedidaCautelar').getStore().add(r);
                                                                        ventanaAM.close();
                                                                        
                                                                        
																	}
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();	
}

function mostrarInterfaceParametrosOficio_3(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,180,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,125,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,155,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia de NO Vinculaci&oacute;n:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        /*{
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },*/
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:185,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Registro de Antecedentes',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        /*var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }*/
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}


function mostrarInterfaceParametrosOficio_3A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,180,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,125,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,155,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia de NO Vinculaci&oacute;n:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        /*{
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },*/
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:185,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Registro de Antecedentes',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        /*var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }*/
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_4(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,185,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,215,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,155,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,155,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Imputados:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Presentaci&oacute;n de imputado ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:155,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:155,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:250,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:245,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Medidas Cautelares',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las condiciones de suspenci&oacute;n condicional de proceso que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosMCAdultosV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Imposición de medidas cautelares',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el imputado debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el imputado debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el imputado debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el imputado debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaMedidas='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gMedidaCautelar').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gMedidaCautelar').getStore().getAt(x);
                                                                            o='{"idMedidaCautelar":"'+fila.data.idMedidaCautelar+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaMedidas=='')
                                                                            	listaMedidas=o;
                                                                            else
                                                                            	listaMedidas+=','+o
                                                                        }
                                                                        
                                                                        
                                                                        if(listaMedidas=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}


function mostrarInterfaceParametrosOficio_4A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,185,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,215,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,155,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,155,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Menores:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Presentaci&oacute;n del menor ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:155,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:155,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:250,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:245,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Medidas Cautelares',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las medidas cautelares que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosMCAdolescentesV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Imposición de medidas cautelares',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el menor debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el menor debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el menor debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el menor debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaMedidas='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gMedidaCautelar').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gMedidaCautelar').getStore().getAt(x);
                                                                            o='{"idMedidaCautelar":"'+fila.data.idMedidaCautelar+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaMedidas=='')
                                                                            	listaMedidas=o;
                                                                            else
                                                                            	listaMedidas+=','+o
                                                                        }
                                                                        
                                                                        
                                                                        if(listaMedidas=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');

    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_5(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,185,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,215,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,155,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,155,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Imputados:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Presentaci&oacute;n de imputado ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:155,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:155,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:250,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:245,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Medidas Cautelares',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las medidas cautelares que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosMCAdultosV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Imposición de medidas cautelares',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el imputado debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el imputado debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el imputado debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el imputado debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaMedidas='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gMedidaCautelar').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gMedidaCautelar').getStore().getAt(x);
                                                                            o='{"idMedidaCautelar":"'+fila.data.idMedidaCautelar+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaMedidas=='')
                                                                            	listaMedidas=o;
                                                                            else
                                                                            	listaMedidas+=','+o
                                                                        }
                                                                        
                                                                        
                                                                        if(listaMedidas=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}


function mostrarInterfaceParametrosOficio_5A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,185,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,215,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,155,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,155,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Menor:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Presentaci&oacute;n de menor ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:155,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:155,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:250,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:245,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Medidas Cautelares',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las medidas cautelares que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosMCAdolescentesV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Imposición de medidas cautelares',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el menor debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el menor debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el menor debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el menor debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaMedidas='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gMedidaCautelar').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gMedidaCautelar').getStore().getAt(x);
                                                                            o='{"idMedidaCautelar":"'+fila.data.idMedidaCautelar+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaMedidas=='')
                                                                            	listaMedidas=o;
                                                                            else
                                                                            	listaMedidas+=','+o
                                                                        }
                                                                        
                                                                        
                                                                        if(listaMedidas=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');

    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_6(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,265,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,295,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,235,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,235,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    var cmbPeriodoDuracion=crearComboExt('cmbPeriodoDuracion',arrPeriodoPresentacion,225,205,120);
    cmbPeriodoDuracion.setValue('3');
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Imputados:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Plan de reparaci&oacute;n del daño:</b>'
                                                                                                },
                                                                                                {
                                                                                                	x:210,
                                                                                                    y:155,
                                                                                                    height:40,
                                                                                                    width:500,
                                                                                                    id:'txtPlanRepacion',
                                                                                                    xtype:'textarea'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:210,
                                                                                                    html:'<b>Periodo duraci&oacute;n:</b>'
                                                                                                },
                                                                                                {
                                                                                                	x:160,
                                                                                                    y:205,
                                                                                                    xtype:'numberfield',
                                                                                                    width:50,
                                                                                                    id:'txtPeriodoDuracion',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoDuracion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:240,
                                                                                                    html:'<b>Presentaci&oacute;n de imputado ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:235,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:235,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:270,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:300,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:330,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:325,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Condiciones de Suspenci&oacute;n Condicional',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las condiciones de suspenci&oacute;n condicional de proceso que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosSCPAdultosV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Suspenci&oacute;n Condicional del Proceso',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var txtPeriodoDuracion=gEx('txtPeriodoDuracion');
                                                                        if(txtPeriodoDuracion.getValue()=='')
                                                                        {
                                                                        	function resp200()
                                                                            {
                                                                            	txtPeriodoDuracion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar el periodo de duraci&oacute;n',resp200);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el imputado debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el imputado debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el imputado debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el imputado debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaCondiciones='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gSuspencion').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gSuspencion').getStore().getAt(x);
                                                                            o='{"idCondicion":"'+fila.data.idCondicion+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaCondiciones=='')
                                                                            	listaCondiciones=o;
                                                                            else
                                                                            	listaCondiciones+=','+o
                                                                        }
                                                                        
                                                                        
                                                                        if(listaCondiciones=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las condiciones de suspenci&oacute;n condicional del proceso a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","condicionesSupencion":['+listaCondiciones+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+
                                                                                            '","periodoSuspension":"'+gEx('txtPeriodoDuracion').getValue()+
                                                                                            '","tiempoSuspension":"'+cmbPeriodoDuracion.getValue()+
                                                                                            '","planReparacion":"'+cv(gEx('txtPlanRepacion').getValue())+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function crearGridRegistrosSCPAdultosV2()
{
	var dsDatos=[];
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                                    {name: 'idCondicion'},
                                                                    {name: 'detallesAdicionales'}
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	var chkRow=new Ext.grid.CheckboxSelectionModel();
	
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														chkRow,
														{
															header:'Condici&oacute;n',
															width:250,
															sortable:true,
															dataIndex:'idCondicion',
                                                            renderer:function(val,meta,registro)
                                                            				{
                                                                            	meta.attr='style="min-height:21px; height:auto; white-space: normal;"';
                                                                            	return formatearValorRenderer(arrCondicionesSCAdultosOTRO,val);
                                                                            }
														},
														{
															header:'Detalles adicionales',
															width:300,
															sortable:true,
															dataIndex:'detallesAdicionales',
                                                            renderer:function(val,meta,registro)
                                                            				{
                                                                            	meta.attr='style="min-height:21px; height:auto; white-space: normal;"';
                                                                            	return val;
                                                                            }
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            
                                                            store:alDatos,
                                                            frame:false,
                                                            x:10,
                                                            y:10,
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            id:'gSuspencion',
                                                            columnLines : true,
                                                            height:290,
                                                            width:750,
                                                            sm:chkRow,
                                                            tbar:	[
                                                            			{
                                                                        	icon:'../images/add.png',
                                                                            cls:'x-btn-text-icon',
                                                                            text:'Agregar condición de suspensi&oacute;n condicional',
                                                                            handler:function()
                                                                            		{
                                                                                    	mostrarVentanaAgregarCondicion();
                                                                                    }
                                                                            
                                                                        },'-',
                                                                        {
                                                                        	icon:'../images/delete.png',
                                                                            cls:'x-btn-text-icon',
                                                                            text:'Remover condición de suspensi&oacute;n condicional',
                                                                            handler:function()
                                                                            		{
                                                                                    	var filas=tblGrid.getSelectionModel().getSelections();
                                                                                        if(filas.length==0)
                                                                                        {
                                                                                        	msgBox('Debe seleccionar la condici&oacute;n que desea remover');
                                                                                            
                                                                                        	return;
                                                                                        }
                                                                                        
                                                                                        tblGrid.getStore().removeAll(filas);
                                                                                        
                                                                                        
                                                                                        
                                                                                    }
                                                                            
                                                                        }
                                                                        
                                                            		]
                                                        }
                                                    );
	return 	tblGrid;
}


function mostrarInterfaceParametrosOficio_6A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,265,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,295,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,235,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,235,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    var cmbPeriodoDuracion=crearComboExt('cmbPeriodoDuracion',arrPeriodoPresentacion,225,205,120);
    cmbPeriodoDuracion.setValue('3');
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Menores:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Plan de reparaci&oacute;n del daño:</b>'
                                                                                                },
                                                                                                {
                                                                                                	x:210,
                                                                                                    y:155,
                                                                                                    height:40,
                                                                                                    width:500,
                                                                                                    id:'txtPlanRepacion',
                                                                                                    xtype:'textarea'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:210,
                                                                                                    html:'<b>Periodo duraci&oacute;n:</b>'
                                                                                                },
                                                                                                {
                                                                                                	x:160,
                                                                                                    y:205,
                                                                                                    xtype:'numberfield',
                                                                                                    width:50,
                                                                                                    id:'txtPeriodoDuracion',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoDuracion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:240,
                                                                                                    html:'<b>Presentaci&oacute;n de menor ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:235,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:235,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:270,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:300,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:330,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:325,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Condiciones de Suspenci&oacute;n Condicional',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las condiciones de suspenci&oacute;n condicional de proceso que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosSCPAdolescente()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Suspenci&oacute;n Condicional del Proceso',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var txtPeriodoDuracion=gEx('txtPeriodoDuracion');
                                                                        if(txtPeriodoDuracion.getValue()=='')
                                                                        {
                                                                        	function resp200()
                                                                            {
                                                                            	txtPeriodoDuracion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar el periodo de duraci&oacute;n',resp200);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el menor debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el menor debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el menor debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el menor debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaCondiciones='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gSuspencion').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gSuspencion').getStore().getAt(x);
                                                                            o='{"idCondicion":"'+fila.data.idCondicion+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaCondiciones=='')
                                                                            	listaCondiciones=o;
                                                                            else
                                                                            	listaCondiciones+=','+o
                                                                        }
                                                                        
                                                                        
                                                                        if(listaCondiciones=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las condiciones de suspenci&oacute;n condicional del proceso a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","condicionesSupencion":['+listaCondiciones+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+
                                                                                            '","periodoSuspension":"'+gEx('txtPeriodoDuracion').getValue()+
                                                                                            '","tiempoSuspension":"'+cmbPeriodoDuracion.getValue()+
                                                                                            '","planReparacion":"'+cv(gEx('txtPlanRepacion').getValue())+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_7(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,185,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,215,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var cmbCentroReclusion=crearComboExt('cmbCentroReclusion',arrCentroReclusion,180,155,350)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Centro de Reclusi&oacute;n:</b>'
                                                        },
                                                        cmbCentroReclusion,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:245,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Interrupción de la SCP',
										width: 700,
										height:360,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbCentroReclusion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	cmbCentroReclusion.focus();
                                                                            }
                                                                            mxgBox('Debe indicar el centro de reclusi&oacute;n en el cual se encuentra el imputado',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","centroReclusion":"'+
                                                                                            cmbCentroReclusion.getValue()+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_7A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,185,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var cmbCentroReclusion=crearComboExt('cmbCentroReclusion',arrCentroReclusion,180,155,350)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:215,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Interrupción de la SCP',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","centroReclusion":"0"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}



function mostrarInterfaceParametrosOficio_8(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,65,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,155,400);
    cmbMostrarVictima.setValue('1');
    
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,185,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,125,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,125,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:95,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Presentaci&oacute;n de imputado ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:125,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:125,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:215,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          }/*,
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Medidas Cautelares',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las condiciones de suspenci&oacute;n condicional de proceso que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosMCAdultosV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }*/
                                                                          ,
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'border',
                                                                              defaultType: 'label',
                                                                              title:'Medidas Cautelares / Condiciones de SCP',
                                                                              items:[
                                                                                          
                                                                                          crearGridRegistrosMC_SCPAdultosV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Suspensión Condicional del Proceso y Medida Cautelar',
										width: 850,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
                                        clicksToEdit:1,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el imputado debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el imputado debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el imputado debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el imputado debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaMedidas='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        var gMedidasCautelares=gEx('gMedidasCautelares');
                                                                        for(x=0;x<gMedidasCautelares.getStore().getCount();x++)
                                                                        {
                                                                        	fila=gMedidasCautelares.getStore().getAt(x);
                                                                        }
                                                                        
                                                                        if(listaMedidas=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","mostrarVictimasComo":"'+
                                                                                            cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","condicionesSuspencion":['+listaCondiciones+'],"fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    
}


function crearGridRegistrosMC_SCPAdultosV2()
{
	var dsDatos=[];
    
    var x;
    for(x=0;x<arrImputados.length;x++)
    {
    	dsDatos.push([arrImputados[x][0],[],[],'']);
    }
    
    
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                                    {name: 'imputado'},
                                                                    {name: 'medidasCautelares'},
                                                                    {name: 'condicionesSCP'},
                                                                    {name: 'planReparacion'}
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	
	
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														
														{
															header:'Imputado',
															width:250,
															sortable:true,
															dataIndex:'imputado',
                                                            renderer:function(val)
                                                            		{
                                                                    	return formatearValorRenderer(arrImputados,val);
                                                                    }
														},
														{
															header:'Medidas Cautelares',
															width:150,
															sortable:true,
															dataIndex:'medidasCautelares',
                                                            renderer:function(val,meta,registro)
                                                            		{
                                                                    	var leyenda='';
                                                                        var x;
                                                                        var o;
                                                                        for(x=0;x<val.length;x++)
                                                                        {
                                                                        	o=val[x];
                                                                            token=o.data.fraccion;
                                                                            if(leyenda=='')
                                                                            	leyenda=token;
                                                                            else
                                                                            	leyenda+=', '+token;
                                                                            
                                                                        }
                                                                        return leyenda+'&nbsp;&nbsp;&nbsp;<a href="javascript:mostrarVentanaAgregarMedidasCautelares(\''+bE(registro.data.imputado)+'\')"><img src="/images/pencil.png"></a>';
                                                                    }
														},
                                                        
														{
															header:'Condiciones de SCP',
															width:150,
															sortable:true,
															dataIndex:'condicionesSCP',
                                                            renderer:function(val,meta,registro)
                                                            		{
                                                                    	var leyenda='';
                                                                        var x;
                                                                        var o;
                                                                        for(x=0;x<val.length;x++)
                                                                        {
                                                                        	o=val[x];
                                                                            token=o.data.fraccion;
                                                                            if(leyenda=='')
                                                                            	leyenda=token;
                                                                            else
                                                                            	leyenda+=', '+token;
                                                                            
                                                                        }
                                                                        return leyenda+'&nbsp;&nbsp;&nbsp;<a href="javascript:mostrarVentanaAgregarCSCP(\''+bE(registro.data.imputado)+'\')"><img src="/images/pencil.png"></a>';
                                                                    }
														},
                                                        
														{
															header:'Plan de Reparaci&oacute;n del Da&ntilde;o',
															width:300,
															sortable:true,
                                                            editor: {xtype:'textarea', height:60},
															dataIndex:'planReparacion'
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            id:'gMedidasCautelares',
                                                            store:alDatos,
                                                            frame:false,
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            region:'center',
                                                            columnLines : true
                                                        }
                                                    );
	return 	tblGrid;
}

function mostrarVentanaAgregarMedidasCautelares(iP)
{
	var pos=obtenerPosFila(gEx('gMedidasCautelares').getStore(),'imputado',bD(iP));
    var filaImputado=gEx('gMedidasCautelares').getStore().getAt(pos);
    
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            			crearGridAsignacionMedidasCautelares(filaImputado)
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Medidas Cautelares ['+formatearValorRenderer(arrImputados,filaImputado.data.imputado)+']',
										width: 730,
										height:450,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
                                                                    	var arrMedidasAplica=[];
																		var gridMedidasImputado=gEx('gridMedidasImputado');
                                                                        var x;
                                                                        var fila;
                                                                        for(x=0;x<gridMedidasImputado.getStore().getCount();x++)
                                                                        {
                                                                        	fila=gridMedidasImputado.getStore().getAt(x);
                                                                            if(fila.data.aplicaMedida)
                                                                            {
                                                                            	arrMedidasAplica.push(fila);
                                                                            }
                                                                        }
                                                                        
                                                                        filaImputado.data.medidasCautelares=arrMedidasAplica;
                                                                        gEx('gMedidasCautelares').getView().refresh();
                                                                        ventanaAM.close();
																	}
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();	
}

function crearGridAsignacionMedidasCautelares(filaImputado)
{
	var aMedidasCautelares=[];
    var x;
    var detallesMedida='';
    var aplicaMedida=false;
    var pos;
    for(x=0;x<arrMedidasCautelaresAdultoOTRO.length;x++)
    {
    	detallesMedida='';
    	aplicaMedida=false;
    	pos=existeValorArregloObjetos(filaImputado.data.medidasCautelares,'data.idMedida',arrMedidasCautelaresAdultoOTRO[x][0]);
        if(pos!=-1)
        {
        	detallesMedida=escaparBR(filaImputado.data.medidasCautelares[pos].data.detallesMedida,true);
        	aplicaMedida=true;
        }
    
    	aMedidasCautelares.push([arrMedidasCautelaresAdultoOTRO[x][0],arrMedidasCautelaresAdultoOTRO[x][1],detallesMedida,aplicaMedida,arrMedidasCautelaresAdultoOTRO[x][2]]);
    }
	var dsDatos=aMedidasCautelares;
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                                    {name: 'idMedida'},  
                                                                    {name: 'lblMedida'},                                                                    
                                                                    {name: 'detallesMedida'},
                                                                    {name: 'aplicaMedida'},
                                                                    {name: 'fraccion'}
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	
	var checkColumn = new Ext.grid.CheckColumn	(
	 												{
													   header: 'Aplica Medida',
													   dataIndex: 'aplicaMedida',
													   width: 90
													}
												);
                                                
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														checkColumn,
														{
															header:'Medida Cautelar',
															width:250,
															sortable:true,
															dataIndex:'lblMedida',
                                                            renderer:function(val,meta,registro)
                                                            		{
                                                                    	meta.attr ='style="white-space: normal;"';
                                                                        return val;
                                                                    }
														},
														{
															header:'Detalle Medida',
															width:300,
															sortable:true,
                                                            editor:{xtype:'textarea',height:60},
															dataIndex:'detallesMedida',
                                                            renderer: function(val)
                                                            		{
                                                                    	return escaparEnter(val);
                                                                    }
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            id:'gridMedidasImputado',
                                                            store:alDatos,
                                                            frame:false,                                                            
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            region:'center',
                                                            clicksToEdit:1,
                                                            plugins:[checkColumn],
                                                            columnLines : true
                                                        }
                                                    );
	
    tblGrid.on('beforeedit',function(e)
    						{
                            	if((e.field=='detallesMedida')&&(!e.record.data.aplicaMedida))
                                {
                                	e.cancel=true;
                                }
                                
                                if((e.field=='aplicaMedida')&&(e.value))
                                {
                                	e.record.set('detallesMedida','');
                                }
                                
                            }
    			)
    
    
    return 	tblGrid;	
}

function mostrarVentanaAgregarCSCP(iP)
{
	var pos=obtenerPosFila(gEx('gMedidasCautelares').getStore(),'imputado',bD(iP));
    var filaImputado=gEx('gMedidasCautelares').getStore().getAt(pos);
    
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            			crearGridAsignacionCondicionesSuspencionCondicional(filaImputado)
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Condiciones de SCP ['+formatearValorRenderer(arrImputados,filaImputado.data.imputado)+']',
										width: 730,
										height:450,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
                                                                    	var arrCondicionesAplica=[];
																		var gridCondicionesImputado=gEx('gridCondicionesSCP');
                                                                        var x;
                                                                        var fila;
                                                                        for(x=0;x<gridCondicionesImputado.getStore().getCount();x++)
                                                                        {
                                                                        	fila=gridCondicionesImputado.getStore().getAt(x);
                                                                            if(fila.data.aplicaMedida)
                                                                            {
                                                                            	arrCondicionesAplica.push(fila);
                                                                            }
                                                                        }
                                                                        
                                                                        filaImputado.data.condicionesSCP=arrCondicionesAplica;
                                                                        gEx('gMedidasCautelares').getView().refresh();
                                                                        ventanaAM.close();
																	}
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();	
}

function crearGridAsignacionCondicionesSuspencionCondicional(filaImputado)
{
	var aCondicionesSuspencion=[];
    var x;
    var detallesMedida='';
    var aplicaMedida=false;
    var pos;
    for(x=0;x<arrCondicionesSCAdultosOTRO.length;x++)
    {
    	detallesMedida='';
    	aplicaMedida=false;
    	pos=existeValorArregloObjetos(filaImputado.data.condicionesSCP,'data.idCondicion',arrCondicionesSCAdultosOTRO[x][0]);
        if(pos!=-1)
        {
        	detallesMedida=escaparBR(filaImputado.data.condicionesSCP[pos].data.detallesMedida,true);
        	aplicaMedida=true;
        }
    
    	aCondicionesSuspencion.push([arrCondicionesSCAdultosOTRO[x][0],arrCondicionesSCAdultosOTRO[x][1],detallesMedida,aplicaMedida,arrCondicionesSCAdultosOTRO[x][2]]);
    }
	var dsDatos=aCondicionesSuspencion;
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                                    {name: 'idCondicion'},  
                                                                    {name: 'lblMedida'},                                                                    
                                                                    {name: 'detallesMedida'},
                                                                    {name: 'aplicaMedida'},
                                                                    {name: 'fraccion'}
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	
	var checkColumn = new Ext.grid.CheckColumn	(
	 												{
													   header: 'Aplica Condici&oacute;n',
													   dataIndex: 'aplicaMedida',
													   width: 90
													}
												);
                                                
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														checkColumn,
														{
															header:'Condicion SCP',
															width:250,
															sortable:true,
															dataIndex:'lblMedida',
                                                            renderer:function(val,meta,registro)
                                                            		{
                                                                    	meta.attr ='style="white-space: normal;"';
                                                                        return val;
                                                                    }
														},
														{
															header:'Detalle Medida',
															width:300,
															sortable:true,
                                                            editor:{xtype:'textarea',height:60},
															dataIndex:'detallesMedida',
                                                            renderer: function(val)
                                                            		{
                                                                    	return escaparEnter(val);
                                                                    }
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            id:'gridCondicionesSCP',
                                                            store:alDatos,
                                                            frame:false,                                                            
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            region:'center',
                                                            clicksToEdit:1,
                                                            plugins:[checkColumn],
                                                            columnLines : true
                                                        }
                                                    );
	
    tblGrid.on('beforeedit',function(e)
    						{
                            	if((e.field=='detallesMedida')&&(!e.record.data.aplicaMedida))
                                {
                                	e.cancel=true;
                                }
                                
                                if((e.field=='aplicaMedida')&&(e.value))
                                {
                                	e.record.set('detallesMedida','');
                                }
                                
                            }
    			)
    
    
    return 	tblGrid;	
}


////8A


function mostrarInterfaceParametrosOficio_8A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,65,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,155,400);
    cmbMostrarVictima.setValue('1');
    
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,185,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,125,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,125,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Audiencia Inicial:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:95,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Presentaci&oacute;n del menor ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:125,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:125,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:215,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          }
                                                                          ,
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'border',
                                                                              defaultType: 'label',
                                                                              title:'Medidas Cautelares / Condiciones de SCP',
                                                                              items:[
                                                                                          
                                                                                          crearGridRegistrosMC_SCPAdolescentesV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Suspensión Condicional del Proceso y Medida Cautelar',
										width: 850,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
                                        clicksToEdit:1,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el menor debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el menor debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el menor debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el menor debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","mostrarVictimasComo":"'+
                                                                                            cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","condicionesSuspencion":['+listaCondiciones+'],"fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    
}


function crearGridRegistrosMC_SCPAdolescentesV2()
{
	var dsDatos=[];
    
    var x;
    for(x=0;x<arrImputados.length;x++)
    {
    	dsDatos.push([arrImputados[x][0],[],[],'']);
    }
    
    
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                                    {name: 'imputado'},
                                                                    {name: 'medidasCautelares'},
                                                                    {name: 'condicionesSCP'},
                                                                    {name: 'planReparacion'}
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	
	
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														
														{
															header:'Imputado',
															width:250,
															sortable:true,
															dataIndex:'imputado',
                                                            renderer:function(val)
                                                            		{
                                                                    	return formatearValorRenderer(arrImputados,val);
                                                                    }
														},
														{
															header:'Medidas Cautelares',
															width:150,
															sortable:true,
															dataIndex:'medidasCautelares',
                                                            renderer:function(val,meta,registro)
                                                            		{
                                                                    	
                                                                    	var leyenda='';
                                                                        var x;
                                                                        var o;
                                                                        for(x=0;x<val.length;x++)
                                                                        {
                                                                        	o=val[x];
                                                                            
                                                                            token=o.data.fraccion;
                                                                            if(leyenda=='')
                                                                            	leyenda=token;
                                                                            else
                                                                            	leyenda+=', '+token;
                                                                            
                                                                        }
                                                                        return leyenda+'&nbsp;&nbsp;&nbsp;<a href="javascript:mostrarVentanaAgregarMedidasCautelaresAdolescentes(\''+bE(registro.data.imputado)+'\')"><img src="/images/pencil.png"></a>';
                                                                    }
														},
                                                        
														{
															header:'Condiciones de SCP',
															width:150,
															sortable:true,
															dataIndex:'condicionesSCP',
                                                            renderer:function(val,meta,registro)
                                                            		{
                                                                    	var leyenda='';
                                                                        var x;
                                                                        var o;
                                                                        for(x=0;x<val.length;x++)
                                                                        {
                                                                        	o=val[x];
                                                                            token=o.data.fraccion;
                                                                            if(leyenda=='')
                                                                            	leyenda=token;
                                                                            else
                                                                            	leyenda+=', '+token;
                                                                            
                                                                        }
                                                                        return leyenda+'&nbsp;&nbsp;&nbsp;<a href="javascript:mostrarVentanaAgregarCSCPAdolescentes(\''+bE(registro.data.imputado)+'\')"><img src="/images/pencil.png"></a>';
                                                                    }
														},
                                                        
														{
															header:'Plan de Reparaci&oacute;n del Da&ntilde;o',
															width:300,
															sortable:true,
                                                            editor: {xtype:'textarea', height:60},
															dataIndex:'planReparacion'
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            id:'gMedidasCautelares',
                                                            store:alDatos,
                                                            frame:false,
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            region:'center',
                                                            columnLines : true
                                                        }
                                                    );
	return 	tblGrid;
}

function mostrarVentanaAgregarMedidasCautelaresAdolescentes(iP)
{
	var pos=obtenerPosFila(gEx('gMedidasCautelares').getStore(),'imputado',bD(iP));
    var filaImputado=gEx('gMedidasCautelares').getStore().getAt(pos);
    
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            			crearGridAsignacionMedidasCautelaresAdolescentes(filaImputado)
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Medidas Cautelares ['+formatearValorRenderer(arrImputados,filaImputado.data.imputado)+']',
										width: 730,
										height:450,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
                                                                    	var arrMedidasAplica=[];
																		var gridMedidasImputado=gEx('gridMedidasImputado');
                                                                        var x;
                                                                        var fila;
                                                                        for(x=0;x<gridMedidasImputado.getStore().getCount();x++)
                                                                        {
                                                                        	fila=gridMedidasImputado.getStore().getAt(x);
                                                                            if(fila.data.aplicaMedida)
                                                                            {
                                                                            	arrMedidasAplica.push(fila);
                                                                            }
                                                                        }
                                                                        
                                                                        filaImputado.data.medidasCautelares=arrMedidasAplica;
                                                                        gEx('gMedidasCautelares').getView().refresh();
                                                                        ventanaAM.close();
																	}
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();	
}

function crearGridAsignacionMedidasCautelaresAdolescentes(filaImputado)
{
	var aMedidasCautelares=[];
    var x;
    var detallesMedida='';
    var aplicaMedida=false;
    var pos;
    for(x=0;x<arrMedidasCautelaresAdolescentesOTRO.length;x++)
    {
    	detallesMedida='';
    	aplicaMedida=false;
    	pos=existeValorArregloObjetos(filaImputado.data.medidasCautelares,'data.idMedida',arrMedidasCautelaresAdolescentesOTRO[x][0]);
        if(pos!=-1)
        {
        	detallesMedida=escaparBR(filaImputado.data.medidasCautelares[pos].data.detallesMedida,true);
        	aplicaMedida=true;
        }
    
    	aMedidasCautelares.push([arrMedidasCautelaresAdolescentesOTRO[x][0],arrMedidasCautelaresAdolescentesOTRO[x][1],detallesMedida,aplicaMedida,arrMedidasCautelaresAdolescentesOTRO[x][2]]);
    }
	var dsDatos=aMedidasCautelares;
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                                    {name: 'idMedida'},  
                                                                    {name: 'lblMedida'},                                                                    
                                                                    {name: 'detallesMedida'},
                                                                    {name: 'aplicaMedida'},
                                                                    {name: 'fraccion'}
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	
	var checkColumn = new Ext.grid.CheckColumn	(
	 												{
													   header: 'Aplica Medida',
													   dataIndex: 'aplicaMedida',
													   width: 90
													}
												);
                                                
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														checkColumn,
														{
															header:'Medida Cautelar',
															width:250,
															sortable:true,
															dataIndex:'lblMedida',
                                                            renderer:function(val,meta,registro)
                                                            		{
                                                                    	meta.attr ='style="white-space: normal;"';
                                                                        return val;
                                                                    }
														},
														{
															header:'Detalle Medida',
															width:300,
															sortable:true,
                                                            editor:{xtype:'textarea',height:60},
															dataIndex:'detallesMedida',
                                                            renderer: function(val)
                                                            		{
                                                                    	return escaparEnter(val);
                                                                    }
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            id:'gridMedidasImputado',
                                                            store:alDatos,
                                                            frame:false,                                                            
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            region:'center',
                                                            clicksToEdit:1,
                                                            plugins:[checkColumn],
                                                            columnLines : true
                                                        }
                                                    );
	
    tblGrid.on('beforeedit',function(e)
    						{
                            	if((e.field=='detallesMedida')&&(!e.record.data.aplicaMedida))
                                {
                                	e.cancel=true;
                                }
                                
                                if((e.field=='aplicaMedida')&&(e.value))
                                {
                                	e.record.set('detallesMedida','');
                                }
                                
                            }
    			)
    
    
    return 	tblGrid;	
}

function mostrarVentanaAgregarCSCPAdolescentes(iP)
{
	var pos=obtenerPosFila(gEx('gMedidasCautelares').getStore(),'imputado',bD(iP));
    var filaImputado=gEx('gMedidasCautelares').getStore().getAt(pos);
    
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            			crearGridAsignacionCondicionesSuspencionCondicionalAdolescentes(filaImputado)
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Condiciones de SCP ['+formatearValorRenderer(arrImputados,filaImputado.data.imputado)+']',
										width: 730,
										height:450,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
                                                                    	var arrCondicionesAplica=[];
																		var gridCondicionesImputado=gEx('gridCondicionesSCP');
                                                                        var x;
                                                                        var fila;
                                                                        for(x=0;x<gridCondicionesImputado.getStore().getCount();x++)
                                                                        {
                                                                        	fila=gridCondicionesImputado.getStore().getAt(x);
                                                                            if(fila.data.aplicaMedida)
                                                                            {
                                                                            	arrCondicionesAplica.push(fila);
                                                                            }
                                                                        }
                                                                        
                                                                        filaImputado.data.condicionesSCP=arrCondicionesAplica;
                                                                        gEx('gMedidasCautelares').getView().refresh();
                                                                        ventanaAM.close();
																	}
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();	
}

function crearGridAsignacionCondicionesSuspencionCondicionalAdolescentes(filaImputado)
{
	var aCondicionesSuspencion=[];
    var x;
    var detallesMedida='';
    var aplicaMedida=false;
    var pos;
    for(x=0;x<arrCondicionesSCAdolescentesOTRO.length;x++)
    {
    	detallesMedida='';
    	aplicaMedida=false;
    	pos=existeValorArregloObjetos(filaImputado.data.condicionesSCP,'data.idCondicion',arrCondicionesSCAdolescentesOTRO[x][0]);
        if(pos!=-1)
        {
        	detallesMedida=escaparBR(filaImputado.data.condicionesSCP[pos].data.detallesMedida,true);
        	aplicaMedida=true;
        }
    
    	aCondicionesSuspencion.push([arrCondicionesSCAdolescentesOTRO[x][0],arrCondicionesSCAdolescentesOTRO[x][1],detallesMedida,aplicaMedida,arrCondicionesSCAdolescentesOTRO[x][2]]);
    }
	var dsDatos=aCondicionesSuspencion;
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                                    {name: 'idCondicion'},  
                                                                    {name: 'lblMedida'},                                                                    
                                                                    {name: 'detallesMedida'},
                                                                    {name: 'aplicaMedida'},
                                                                    {name: 'fraccion'}
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	
	var checkColumn = new Ext.grid.CheckColumn	(
	 												{
													   header: 'Aplica Condici&oacute;n',
													   dataIndex: 'aplicaMedida',
													   width: 130
													}
												);
                                                
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														checkColumn,
														{
															header:'Condicion SCP',
															width:250,
															sortable:true,
															dataIndex:'lblMedida',
                                                            renderer:function(val,meta,registro)
                                                            		{
                                                                    	meta.attr ='style="white-space: normal;"';
                                                                        return val;
                                                                    }
														},
														{
															header:'Detalle Medida',
															width:300,
															sortable:true,
                                                            editor:{xtype:'textarea',height:60},
															dataIndex:'detallesMedida',
                                                            renderer: function(val)
                                                            		{
                                                                    	return escaparEnter(val);
                                                                    }
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            id:'gridCondicionesSCP',
                                                            store:alDatos,
                                                            frame:false,                                                            
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            region:'center',
                                                            clicksToEdit:1,
                                                            plugins:[checkColumn],
                                                            columnLines : true
                                                        }
                                                    );
	
    tblGrid.on('beforeedit',function(e)
    						{
                            	if((e.field=='detallesMedida')&&(!e.record.data.aplicaMedida))
                                {
                                	e.cancel=true;
                                }
                                
                                if((e.field=='aplicaMedida')&&(e.value))
                                {
                                	e.record.set('detallesMedida','');
                                }
                                
                            }
    			)
    
    
    return 	tblGrid;	
}

function mostrarInterfaceParametrosOficio_9(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,275,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,305,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoDuracion=crearComboExt('cmbPeriodoDuracion',arrPeriodoPresentacion,245,215,120);
    cmbPeriodoDuracion.setValue('3');
	var cmbJueces=crearComboExt('cmbJueces',arrJuecesGlobal,210,65,350);
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Juez que ordena incompetencia:</b>'
                                                        },   
                                                        cmbJueces,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Fecha del Auto:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaAuto',
                                                            x:210,
                                                            y:95,
                                                            value:''
                                                        },                                               
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                 										{
                                                            x:10,
                                                            y:160,
                                                            html:'<b>Medidas Cautelares Actuales:</b>'
                                                        },
                                                        {
                                                            x:210,
                                                            y:155,
                                                            width:300,
                                                            id:'txtMedidasCautelares',
                                                            readOnly:true,
                                                            xtype:'textfield'
                                                        },
                                                        {
                                                            x:520,
                                                            y:157,
                                                            html:'<a href="javascript:mostrarVentanaSeleccionMedidasCautelares()"><img src="../images/pencil.png"></a>'
                                                        },
                                                        {
                                                            x:10,
                                                            y:190,
                                                            html:'<b>Condiciones de SCP Actuales:</b>'
                                                        },
                                                        {
                                                            x:210,
                                                            y:185,
                                                            width:300,
                                                            id:'txtCondicionesSCP',
                                                            readOnly:true,
                                                            xtype:'textfield'
                                                        },
                                                        {
                                                            x:520,
                                                            y:187,
                                                            html:'<a href="javascript:mostrarVentanaSeleccionCondicionesSCP()"><img src="../images/pencil.png"></a>'
                                                        },
                                                        {
                                                            x:10,
                                                            y:220,
                                                            html:'<b>Periodo duraci&oacute;n:</b>'
                                                        },
                                                        {
                                                            x:180,
                                                            y:215,
                                                            xtype:'numberfield',
                                                            width:50,
                                                            id:'txtPeriodoDuracion',
                                                            allowDecimals:false,
                                                            allowNegative:false
                                                        },
                                                        cmbPeriodoDuracion,
                                                        {
                                                            x:10,
                                                            y:250,
                                                            html:'<b>No. de Oficio Conocimiento:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:245,
                                                            width:'50',
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioConocimiento',
                                                            allowDecimals:false,
                                                            allowNegative:false
                                                        },
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:310,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:340,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:335,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Aceptaci&oacute;n de Competencia de UGJ',
										width: 700,
										height:450,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbJueces.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbJueces.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el juez que ordena la incompetencia',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        var fechaAuto=gEx('fechaAuto');
                                                                        if(fechaAuto.getValue()=='')
                                                                        {
                                                                        	function resp200()
                                                                            {
                                                                            	fechaAuto.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha del auto',resp200);
                                                                            return;
                                                                        }
                                                                        var x;
                                                                        var listaCondicionesActuales='';
                                                                        var listaMedidasActuales='';
                                                                        var pos;
                                                                        var iMedida;
                                                                        var arrFilas=[];
                                                                        for(x=0;x<gEx('txtMedidasCautelares').arrMedidas.length;x++)
                                                                        {
                                                                            iMedida=gEx('txtMedidasCautelares').arrMedidas[x];
                                                                            if(listaMedidasActuales=='')
                                                                            	listaMedidasActuales=iMedida;
                                                                            else
                                                                            	listaMedidasActuales+=','+iMedida;
                                                                            
                                                                            
                                                                        }
                                                                        
                                                                        /*if(listaMedidasActuales=='')
                                                                        {
                                                                        	
                                                                        	function resp120()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares actuales que el imputado tiene impuestas',resp120);
                                                                        	return
                                                                        }*/
                                                                        
                                                                        var iCondicion;
                                                                        for(x=0;x<gEx('txtCondicionesSCP').arrCondiciones.length;x++)
                                                                        {
                                                                            iCondicion=gEx('txtCondicionesSCP').arrCondiciones[x];
                                                                            if(listaCondicionesActuales=='')
                                                                            	listaCondicionesActuales=iCondicion;
                                                                            else
                                                                            	listaCondicionesActuales+=','+iCondicion;
                                                                            
                                                                            
                                                                        }
                                                                        
                                                                        if((listaCondicionesActuales!='')&&(gEx('txtPeriodoDuracion').getValue()==''))
                                                                        {
                                                                        	
                                                                        	function resp120()
                                                                            {
                                                                            	gEx('txtPeriodoDuracion').focus();

                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar el periodo de duraci&oacute;n de las condiciones de suspenci&oacute;n de proceso actuales que el imputado tiene impuestas',resp120);
                                                                        	return
                                                                        }
                                                                        
                                                                        
                                                                        var txtNoOficioConocimiento=gEx('txtNoOficioConocimiento');
                                                                        if(txtNoOficioConocimiento.getValue()=='')
                                                                        {
                                                                        	function resp60()
                                                                            {
                                                                            	txtNoOficioConocimiento.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el n&uacute;mero de oficio a trav&eacute;s del cual se da conocimiento de las medias cauteres y de suspenci&oacute;n condicional del proceso',resp60);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","mostrarVictimasComo":"'+
                                                                                             cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","listaMedidasActuales":"'+
                                                                                            listaMedidasActuales+'","listaCondicionesActuales":"'+listaCondicionesActuales+
                                                                                            '","fechaAuto":"'+fechaAuto.getValue().format('Y-m-d')+'","juez":"'+
                                                                                            cmbJueces.getValue()+'","periodoDuracion":"'+gEx('txtPeriodoDuracion').getValue()+
                                                                                            '","tiempoPeriodoDuracion":"'+cmbPeriodoDuracion.getValue()+
                                                                                            '","oficioConocimiento":"'+txtNoOficioConocimiento.getValue()+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
    gEx('txtMedidasCautelares').arrMedidas=[];
    gEx('txtCondicionesSCP').arrCondiciones=[];
}

function mostrarInterfaceParametrosOficio_9A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,275,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,305,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoDuracion=crearComboExt('cmbPeriodoDuracion',arrPeriodoPresentacion,245,215,120);
    cmbPeriodoDuracion.setValue('3');
	var cmbJueces=crearComboExt('cmbJueces',arrJuecesGlobal,210,65,350);
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Juez que ordena incompetencia:</b>'
                                                        },   
                                                        cmbJueces,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Fecha del Auto:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaAuto',
                                                            x:210,
                                                            y:95,
                                                            value:''
                                                        },                                               
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                 										{
                                                            x:10,
                                                            y:160,
                                                            html:'<b>Medidas Cautelares Actuales:</b>'
                                                        },
                                                        {
                                                            x:210,
                                                            y:155,
                                                            width:300,
                                                            id:'txtMedidasCautelares',
                                                            readOnly:true,
                                                            xtype:'textfield'
                                                        },
                                                        {
                                                            x:520,
                                                            y:157,
                                                            html:'<a href="javascript:mostrarVentanaSeleccionMedidasCautelaresAdolescentes()"><img src="../images/pencil.png"></a>'
                                                        },
                                                        {
                                                            x:10,
                                                            y:190,
                                                            html:'<b>Condiciones de SCP Actuales:</b>'
                                                        },
                                                        {
                                                            x:210,
                                                            y:185,
                                                            width:300,
                                                            id:'txtCondicionesSCP',
                                                            readOnly:true,
                                                            xtype:'textfield'
                                                        },
                                                        {
                                                            x:520,
                                                            y:187,
                                                            html:'<a href="javascript:mostrarVentanaSeleccionCondicionesSCPAdolescentes()"><img src="../images/pencil.png"></a>'
                                                        },
                                                        {
                                                            x:10,
                                                            y:220,
                                                            html:'<b>Periodo duraci&oacute;n:</b>'
                                                        },
                                                        {
                                                            x:180,
                                                            y:215,
                                                            xtype:'numberfield',
                                                            width:50,
                                                            id:'txtPeriodoDuracion',
                                                            allowDecimals:false,
                                                            allowNegative:false
                                                        },
                                                        cmbPeriodoDuracion,
                                                        {
                                                            x:10,
                                                            y:250,
                                                            html:'<b>No. de Oficio Conocimiento:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:245,
                                                            width:'50',
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioConocimiento',
                                                            allowDecimals:false,
                                                            allowNegative:false
                                                        },
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:310,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:340,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:335,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Aceptaci&oacute;n de Competencia de UGJ',
										width: 700,
										height:450,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbJueces.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbJueces.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el juez que ordena la incompetencia',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        var fechaAuto=gEx('fechaAuto');
                                                                        if(fechaAuto.getValue()=='')
                                                                        {
                                                                        	function resp200()
                                                                            {
                                                                            	fechaAuto.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha del auto',resp200);
                                                                            return;
                                                                        }
                                                                        var x;
                                                                        var listaCondicionesActuales='';
                                                                        var listaMedidasActuales='';
                                                                        var pos;
                                                                        var iMedida;
                                                                        var arrFilas=[];
                                                                        for(x=0;x<gEx('txtMedidasCautelares').arrMedidas.length;x++)
                                                                        {
                                                                            iMedida=gEx('txtMedidasCautelares').arrMedidas[x];
                                                                            if(listaMedidasActuales=='')
                                                                            	listaMedidasActuales=iMedida;
                                                                            else
                                                                            	listaMedidasActuales+=','+iMedida;
                                                                            
                                                                            
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        var iCondicion;
                                                                        for(x=0;x<gEx('txtCondicionesSCP').arrCondiciones.length;x++)
                                                                        {
                                                                            iCondicion=gEx('txtCondicionesSCP').arrCondiciones[x];
                                                                            if(listaCondicionesActuales=='')
                                                                            	listaCondicionesActuales=iCondicion;
                                                                            else
                                                                            	listaCondicionesActuales+=','+iCondicion;
                                                                            
                                                                            
                                                                        }
                                                                        
                                                                        if((listaCondicionesActuales!='')&&(gEx('txtPeriodoDuracion').getValue()==''))
                                                                        {
                                                                        	
                                                                        	function resp120()
                                                                            {
                                                                            	gEx('txtPeriodoDuracion').focus();

                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar el periodo de duraci&oacute;n de las condiciones de suspenci&oacute;n de proceso actuales que el imputado tiene impuestas',resp120);
                                                                        	return
                                                                        }
                                                                        
                                                                        
                                                                        var txtNoOficioConocimiento=gEx('txtNoOficioConocimiento');
                                                                        if(txtNoOficioConocimiento.getValue()=='')
                                                                        {
                                                                        	function resp60()
                                                                            {
                                                                            	txtNoOficioConocimiento.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el n&uacute;mero de oficio a trav&eacute;s del cual se da conocimiento de las medias cauteres y de suspenci&oacute;n condicional del proceso',resp60);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","mostrarVictimasComo":"'+
                                                                                             cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","listaMedidasActuales":"'+
                                                                                            listaMedidasActuales+'","listaCondicionesActuales":"'+listaCondicionesActuales+
                                                                                            '","fechaAuto":"'+fechaAuto.getValue().format('Y-m-d')+'","juez":"'+
                                                                                            cmbJueces.getValue()+'","periodoDuracion":"'+gEx('txtPeriodoDuracion').getValue()+
                                                                                            '","tiempoPeriodoDuracion":"'+cmbPeriodoDuracion.getValue()+
                                                                                            '","oficioConocimiento":"'+txtNoOficioConocimiento.getValue()+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
    gEx('txtMedidasCautelares').arrMedidas=[];
    gEx('txtCondicionesSCP').arrCondiciones=[];
}

function mostrarVentanaSeleccionMedidasCautelaresAdolescentes()
{
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'Seleccione las medidas cautelares actuales:'
                                                        },
                                                        crearGridMedidasCautelaresActualesAdolescentes()
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Seleccion de Medidas Cautelares',
										width: 700,
										height:400,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',                                                            
															handler: function()
																	{
																		var arrFilas=gEx('gMedidasCautelaresActuales').getSelectionModel().getSelections();
																		if(arrFilas.length==0)
                                                                        {
                                                                        	msgBox('Debe seleccionar las medidas cautelares actuales que el imputado tiene impuestas');
                                                                        	return;
                                                                        }
                                                                    	var arrMedidas=[];
                                                                        var x;
                                                                        var fila;
                                                                        for(x=0;x<arrFilas.length;x++)
                                                                        {
                                                                        	arrMedidas.push(arrFilas[x].data.idMedidaCautelar);
                                                                        }
                                                                        gEx('txtMedidasCautelares').arrMedidas=arrMedidas;
                                                                        gEx('txtMedidasCautelares').setValue(renderizarMedidasCautelaresAdolescentes(arrMedidas));
                                                                        ventanaAM.close();
                                                                        
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();	
    
    var iMedida;
    var x;
    var pos;
    var arrFilas=[];
    for(x=0;x<gEx('txtMedidasCautelares').arrMedidas.length;x++)
    {
    	iMedida=gEx('txtMedidasCautelares').arrMedidas[x];
        
        pos=obtenerPosFila(gEx('gMedidasCautelaresActuales').getStore(),'idMedidaCautelar',iMedida);
        gEx('gMedidasCautelaresActuales').getSelectionModel().selectRecords([gEx('gMedidasCautelaresActuales').getStore().getAt(pos)],true);
        
        
    }
    
    
}

function crearGridMedidasCautelaresActualesAdolescentes()
{
	var dsDatos=arrMedidasCautelaresAdolescentesOTRO;
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                        			{name: 'idMedidaCautelar'},
                                                                    {name: 'medidaCautelar'}
                                                                    
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	var chkRow=new Ext.grid.CheckboxSelectionModel();
	
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														chkRow,
														{
															header:'Medida Cautelar',
															width:600,
															sortable:true,
															dataIndex:'medidaCautelar',
                                                            renderer:mostrarValorDescripcion
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            
                                                            store:alDatos,
                                                            frame:false,
                                                            x:10,
                                                            y:40,
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            id:'gMedidasCautelaresActuales',
                                                            columnLines : true,
                                                            height:260,
                                                            width:650,
                                                            sm:chkRow
                                                        }
                                                    );
	return 	tblGrid;
}


function renderizarMedidasCautelaresAdolescentes(arrMedidas)
{
	var x;
    var pos;
    var leyenda='';
    var token;
    for(x=0;x<arrMedidas.length;x++)
    {
    	pos=existeValorMatriz(arrMedidasCautelaresAdolescentesOTRO,arrMedidas[x]);
        token=arrMedidasCautelaresAdolescentesOTRO[pos][2];
        if(leyenda=='')
        	leyenda=token;
        else
        	leyenda+=', '+token;
        
    }
    
    return leyenda;
}


function mostrarVentanaSeleccionCondicionesSCPAdolescentes()
{
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'Seleccione las condiciones de SCP actuales:'
                                                        },
                                                        crearGridCondicionesSCPAdolescentes()
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Selecci&oacute;n de Condiciones de SCP',
										width: 700,
										height:400,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',                                                            
															handler: function()
																	{
																		var arrFilas=gEx('gCondicionesSuspencion').getSelectionModel().getSelections();
																		if(arrFilas.length==0)
                                                                        {
                                                                        	msgBox('Debe seleccionar las condiciones de SCP actuales que el imputado tiene impuestas');
                                                                        	return;
                                                                        }
                                                                    	var arrCondiciones=[];
                                                                        var x;
                                                                        var fila;
                                                                        for(x=0;x<arrFilas.length;x++)
                                                                        {
                                                                        	arrCondiciones.push(arrFilas[x].data.idCondicion);
                                                                        }
                                                                        gEx('txtCondicionesSCP').arrCondiciones=arrCondiciones;
                                                                        gEx('txtCondicionesSCP').setValue(renderizarCondicionesSuspencionCondicionalAdolescentes(arrCondiciones));
                                                                        ventanaAM.close();
                                                                        
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();	
    
    var iCondicion;
    var x;
    var pos;
    var arrFilas=[];
    for(x=0;x<gEx('txtCondicionesSCP').arrCondiciones.length;x++)
    {
    	iCondicion=gEx('txtCondicionesSCP').arrCondiciones[x];
        
        pos=obtenerPosFila(gEx('gCondicionesSuspencion').getStore(),'idCondicion',iCondicion);
        gEx('gCondicionesSuspencion').getSelectionModel().selectRecords([gEx('gCondicionesSuspencion').getStore().getAt(pos)],true);
        
        
    }
    
    
}

function crearGridCondicionesSCPAdolescentes()
{
	var dsDatos=arrCondicionesSCAdultosOTRO;
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                        			{name: 'idCondicion'},
                                                                    {name: 'condicionSCP'}
                                                                    
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	var chkRow=new Ext.grid.CheckboxSelectionModel();
	
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														chkRow,
														{
															header:'Condici&oacute;n SCP',
															width:600,
															sortable:true,
															dataIndex:'condicionSCP',
                                                            renderer:mostrarValorDescripcion
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            
                                                            store:alDatos,
                                                            frame:false,
                                                            x:10,
                                                            y:40,
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            id:'gCondicionesSuspencion',
                                                            columnLines : true,
                                                            height:260,
                                                            width:650,
                                                            sm:chkRow
                                                        }
                                                    );
	return 	tblGrid;
}


function renderizarCondicionesSuspencionCondicionalAdolescentes(arrCondiciones)
{
	var x;
    var pos;
    var leyenda='';
    var token;
    for(x=0;x<arrCondiciones.length;x++)
    {
    	pos=existeValorMatriz(arrCondicionesSCAdultosOTRO,arrCondiciones[x]);
        token=arrCondicionesSCAdultosOTRO[pos][2];
        if(leyenda=='')
        	leyenda=token;
        else
        	leyenda+=', '+token;
        
    }
    
    return leyenda;
}


function mostrarInterfaceParametrosOficio_10(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,185,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,215,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)



	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia Intermedia:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Art&iacute;culo fundamento:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:155,
                                                            xtype:'numberfield',
                                                            width:80,
                                                            id:'txtArticulo'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:245,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Remisión a Tribunal de Enjuiciamiento',
										width: 700,
										height:360,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(gEx('txtArticulo').getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	gEx('txtArticulo').focus();
                                                                            }
                                                                            mxgBox('Debe indicar el art&iacute;culo que fundamenta la remisi&oacute;n',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","articulo":"'+
                                                                                            gEx('txtArticulo').getValue()+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}


function mostrarInterfaceParametrosOficio_10A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,185,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,215,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)



	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia Intermedia:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Art&iacute;culo fundamento:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:155,
                                                            xtype:'numberfield',
                                                            width:80,
                                                            id:'txtArticulo'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:245,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Remisión a Tribunal de Enjuiciamiento',
										width: 700,
										height:360,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(gEx('txtArticulo').getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	gEx('txtArticulo').focus();
                                                                            }
                                                                            mxgBox('Debe indicar el art&iacute;culo que fundamenta la remisi&oacute;n',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","articulo":"'+
                                                                                            gEx('txtArticulo').getValue()+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_11(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,185,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia a Celebrar:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:215,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Informe de Cumplimiento',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_11A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,185,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia a Celebrar:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:215,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Informe de Cumplimiento',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_12(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbAudienciaMedidasCautelares=crearComboExt('cmbAudienciaMedidasCautelares',arrAudienciasCarpetaV2,310,185,350);
    
    var arrTipoCumplimiento=[['1','Acuerdo Inmediato'],['2','Acuerdo Diferido']];
	var cmbTipoAcuerdo=crearComboExt('cmbTipoAcuerdo',arrTipoCumplimiento,160,125,200);

    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,215,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,245,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia Intermedia:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Tipo de Acuerdo:</b>'
                                                        },
                                                        cmbTipoAcuerdo,
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:155,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Audiencia en que se impuso medidas cauteres:</b>'
                                                        },
                                                        cmbAudienciaMedidasCautelares,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:275,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Informe de Acuerdo Reparatorio',
										width: 700,
										height:390,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbTipoAcuerdo.getValue()=='')
                                                                        {
                                                                        	function resp701()
                                                                            {
                                                                               	cmbTipoAcuerdo.focus();
                                                                            }
                                                                            msgBox('Debe indicar el tipo de acuerdo autorizado',resp701);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaMedidasCautelares.getValue()=='')
                                                                        {
                                                                        	function resp70()
                                                                            {
                                                                                cmbAudienciaMedidasCautelares.focus();
                                                                            }
                                                                            msgBox('Debe indicar la audiencia en la cual se fijaron las medidas cautelares',resp70);
                                                                            return;
                                                                        }

                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","audienciaMediasCautelares":"'+
                                                                                            cmbAudienciaMedidasCautelares.getValue()+'","tipoAcuerdo":"'+cmbTipoAcuerdo.getValue()+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_12A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbAudienciaMedidasCautelares=crearComboExt('cmbAudienciaMedidasCautelares',arrAudienciasCarpetaV2,310,185,350);
    
    var arrTipoCumplimiento=[['1','Acuerdo Inmediato'],['2','Acuerdo Diferido']];
	var cmbTipoAcuerdo=crearComboExt('cmbTipoAcuerdo',arrTipoCumplimiento,160,125,200);

    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,215,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,245,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia Intermedia:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Tipo de Acuerdo:</b>'
                                                        },
                                                        cmbTipoAcuerdo,
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:155,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Audiencia en que se impuso medidas cauteres:</b>'
                                                        },
                                                        cmbAudienciaMedidasCautelares,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:275,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Informe de Acuerdo Reparatorio',
										width: 700,
										height:390,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbTipoAcuerdo.getValue()=='')
                                                                        {
                                                                        	function resp701()
                                                                            {
                                                                               	cmbTipoAcuerdo.focus();
                                                                            }
                                                                            msgBox('Debe indicar el tipo de acuerdo autorizado',resp701);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaMedidasCautelares.getValue()=='')
                                                                        {
                                                                        	function resp70()
                                                                            {
                                                                                cmbAudienciaMedidasCautelares.focus();
                                                                            }
                                                                            msgBox('Debe indicar la audiencia en la cual se fijaron las medidas cautelares',resp70);
                                                                            return;
                                                                        }

                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","audienciaMediasCautelares":"'+
                                                                                            cmbAudienciaMedidasCautelares.getValue()+'","tipoAcuerdo":"'+cmbTipoAcuerdo.getValue()+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_13(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,185,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,215,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                 										{
                                                            x:10,
                                                            y:160,
                                                            html:'<b>Medidas Cautelares Actuales:</b>'
                                                        },
                                                        {
                                                            x:210,
                                                            y:155,
                                                            width:300,
                                                            id:'txtMedidasCautelares',
                                                            readOnly:true,
                                                            xtype:'textfield'
                                                        },
                                                        {
                                                            x:520,
                                                            y:157,
                                                            html:'<a href="javascript:mostrarVentanaSeleccionMedidasCautelares()"><img src="../images/pencil.png"></a>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:245,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Informe Prisi&oacute;n Preventiva Justificada',
										width: 700,
										height:360,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        var x;
                                                                        var listaMedidasActuales='';
                                                                        var pos;
                                                                        var iMedida;
                                                                        var arrFilas=[];
                                                                        for(x=0;x<gEx('txtMedidasCautelares').arrMedidas.length;x++)
                                                                        {
                                                                            iMedida=gEx('txtMedidasCautelares').arrMedidas[x];
                                                                            if(listaMedidasActuales=='')
                                                                            	listaMedidasActuales=iMedida;
                                                                            else
                                                                            	listaMedidasActuales+=','+iMedida;
                                                                            
                                                                            
                                                                        }
                                                                        
                                                                        if(listaMedidasActuales=='')
                                                                        {
                                                                        	
                                                                        	function resp120()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares actuales que el imputado tiene impuestas',resp120);
                                                                        	return
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","listaMedidasActuales":"'+listaMedidasActuales+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
    gEx('txtMedidasCautelares').arrMedidas=[];
}

function mostrarInterfaceParametrosOficio_13A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,185,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,215,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                 										{
                                                            x:10,
                                                            y:160,
                                                            html:'<b>Medidas Cautelares Actuales:</b>'
                                                        },
                                                        {
                                                            x:210,
                                                            y:155,
                                                            width:300,
                                                            id:'txtMedidasCautelares',
                                                            readOnly:true,
                                                            xtype:'textfield'
                                                        },
                                                        {
                                                            x:520,
                                                            y:157,
                                                            html:'<a href="javascript:mostrarVentanaSeleccionMedidasCautelaresAdolescentes()"><img src="../images/pencil.png"></a>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:245,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Informe Prisi&oacute;n Preventiva Justificada',
										width: 700,
										height:360,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        var x;
                                                                        var listaMedidasActuales='';
                                                                        var pos;
                                                                        var iMedida;
                                                                        var arrFilas=[];
                                                                        for(x=0;x<gEx('txtMedidasCautelares').arrMedidas.length;x++)
                                                                        {
                                                                            iMedida=gEx('txtMedidasCautelares').arrMedidas[x];
                                                                            if(listaMedidasActuales=='')
                                                                            	listaMedidasActuales=iMedida;
                                                                            else
                                                                            	listaMedidasActuales+=','+iMedida;
                                                                            
                                                                            
                                                                        }
                                                                        
                                                                        if(listaMedidasActuales=='')
                                                                        {
                                                                        	
                                                                        	function resp120()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares actuales que el imputado tiene impuestas',resp120);
                                                                        	return
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","listaMedidasActuales":"'+listaMedidasActuales+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
    gEx('txtMedidasCautelares').arrMedidas=[];
}

function mostrarInterfaceParametrosOficio_14(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,285,95,350);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,185,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia en la que se Declara la Sustracci&oacute;n:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:215,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Libramiento de orden de aprehensión y/o sustracción',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se declara la sustracci&oacute;n del imputado',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}


function mostrarInterfaceParametrosOficio_14A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,285,95,350);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,185,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia en la que se Declara la Sustracci&oacute;n:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:215,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Libramiento de orden de aprehensión y/o sustracción',
										width: 700,
										height:330,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se declara la sustracci&oacute;n del imputado',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_15(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,215,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,245,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,185,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,185,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Imputados:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Celebrada:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Medidas Cautelares Actuales:</b>'
                                                                                                },
                                                                                                {
                                                                                                	x:210,
                                                                                                    y:155,
                                                                                                    width:300,
                                                                                                    id:'txtMedidasCautelares',
                                                                                                    readOnly:true,
                                                                                                    xtype:'textfield'
                                                                                                },
                                                                                                {
                                                                                                    x:520,
                                                                                                    y:157,
                                                                                                    html:'<a href="javascript:mostrarVentanaSeleccionMedidasCautelares()"><img src="../images/pencil.png"></a>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Presentaci&oacute;n de imputado ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:185,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:185,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:250,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:280,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:275,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Nuevas Medidas Cautelares',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las medidas cautelares que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosMCAdultosV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Cumplimiento de OA y Modificaci&oacute;n de MC',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el imputado debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el imputado debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el imputado debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el imputado debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaMedidas='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gMedidaCautelar').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gMedidaCautelar').getStore().getAt(x);
                                                                            o='{"idMedidaCautelar":"'+fila.data.idMedidaCautelar+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaMedidas=='')
                                                                            	listaMedidas=o;
                                                                            else
                                                                            	listaMedidas+=','+o
                                                                        }
                                                                        
                                                                      	var listaMedidasActuales='';
                                                                        var pos;
                                                                        var arrFilas=[];
                                                                        for(x=0;x<gEx('txtMedidasCautelares').arrMedidas.length;x++)
                                                                        {
                                                                            iMedida=gEx('txtMedidasCautelares').arrMedidas[x];
                                                                            if(listaMedidasActuales=='')
                                                                            	listaMedidasActuales=iMedida;
                                                                            else
                                                                            	listaMedidasActuales+=','+iMedida;
                                                                            
                                                                            
                                                                        }
                                                                        
                                                                        if(listaMedidasActuales=='')
                                                                        {
                                                                        	
                                                                        	function resp120()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares actuales que el imputado tiene impuestas',resp120);
                                                                        	return
                                                                        }
                                                                        
                                                                        if(listaMedidas=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+
                                                                                            '","listaMedidasActuales":"'+listaMedidasActuales+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
    
    
    gEx('txtMedidasCautelares').arrMedidas=[];
}

function mostrarInterfaceParametrosOficio_15A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
    var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
	var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,160,215,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	
    
    cmbImputados.on('select',function(cmb,registro)
    						{
                            	function funcAjax()
                                {
                                    var resp=peticion_http.responseText;
                                    arrResp=resp.split('|');
                                    if(arrResp[0]=='1')
                                    {
                                        //var arrMedidas=eval(arrResp[1]);
                                        //gEx('gMedidas').getStore().loadData(arrMedidas);
                                    }
                                    else
                                    {
                                        msgBox('<?php echo $etj["errOperacion"]?>'+' <br />'+arrResp[0]);
                                    }
                                }
                                obtenerDatosWeb('../paginasFunciones/funcionesModulosEspeciales_SGP.php',funcAjax, 'POST','funcion=221&c='+carpetaAdministrativa+'&iC='+idCarpeta+'&i='+registro.data.id,true);
                            }
    				)
    
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,160,245,400);
    var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)
    
   
    
    var arrPeridoPresentacion=[['1','Periodo'],['2','Fecha']];
    var cmbPeriodo=crearComboExt('cmbPeriodo',arrPeridoPresentacion,250,185,110);
    cmbPeriodo.setValue('2');
    cmbPeriodo.on('select',function(cmb,registro)
    						{
                            	if(registro.data.id=='2')
                                {
                                	
                                    gEx('periodoPresentacionImputado').hide();
                                	gEx('cmbPeriodoPresentacion').hide();
                                    gEx('fechaPresentacionImputado').show();
                                }
                                else
                                {
                                	gEx('periodoPresentacionImputado').show();
                                	gEx('cmbPeriodoPresentacion').show();
                                    gEx('fechaPresentacionImputado').hide();
                                }
                            }
    			)
    
    var arrPeriodoPresentacion=[['1','Horas'],['2','Dias'],['3','Meses'],['4','A\xF1os']];
    var cmbPeriodoPresentacion=crearComboExt('cmbPeriodoPresentacion',arrPeriodoPresentacion,440,185,120);
    cmbPeriodoPresentacion.setValue('2');
    cmbPeriodoPresentacion.hide();
    
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'border',
											defaultType: 'label',
											items: 	[
                                            
                                            			{
                                                        	xtype:'tabpanel',
                                                            region:'center',
                                                            id:'tabRegistros',
                                                            activeTab:0,
                                                            items:	[
                                                            				{
                                                                                 xtype:'panel',
                                                                                  layout:'absolute',
                                                                                  defaultType: 'label',
                                                                                  title:'Datos Generales',
                                                                                  items:	[
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:10,
                                                                                                    html:'<b>No de oficio a asignar:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:5,
                                                                                                    xtype:'numberfield',
                                                                                                    id:'txtNoOficioAsignar',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false,
                                                                                                    width:100
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:40,
                                                                                                    html:'<b>Carpeta Judicial:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:40,
                                                                                                    html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:70,
                                                                                                    html:'<b>Menores:</b>'
                                                                                                },
                                                                                                cmbImputados,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:100,
                                                                                                    html:'<b>Audiencia Celebrada:</b>'
                                                                                                },
                                                                                                cmbAudienciaCelebrar,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:130,
                                                                                                    html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                                                                },
                                                                                                
                                                                                                {
                                                                                                    xtype:'datefield',
                                                                                                    id:'fechaVinculacion',
                                                                                                    x:210,
                                                                                                    y:125,
                                                                                                    value:fechaVinculacion
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:160,
                                                                                                    html:'<b>Medidas Cautelares Actuales:</b>'
                                                                                                },
                                                                                                {
                                                                                                	x:210,
                                                                                                    y:155,
                                                                                                    width:300,
                                                                                                    id:'txtMedidasCautelares',
                                                                                                    readOnly:true,
                                                                                                    xtype:'textfield'
                                                                                                },
                                                                                                {
                                                                                                    x:520,
                                                                                                    y:157,
                                                                                                    html:'<a href="javascript:mostrarVentanaSeleccionMedidasCautelaresAdolescentes()"><img src="../images/pencil.png"></a>'
                                                                                                },
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:190,
                                                                                                    html:'<b>Presentaci&oacute;n del menor ante unidad:</b>'
                                                                                                },
                                                                                                cmbPeriodo,
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:185,
                                                                                                    xtype:'datefield',
                                                                                                    
                                                                                                    id:'fechaPresentacionImputado'
                                                                                                   
                                                                                                },
                                                                                                {
                                                                                                    x:375,
                                                                                                    y:185,
                                                                                                    width:50,
                                                                                                    hidden:true,
                                                                                                    id:'periodoPresentacionImputado',
                                                                                                    xtype:'numberfield',
                                                                                                    allowDecimals:false,
                                                                                                    allowNegative:false
                                                                                                },
                                                                                                cmbPeriodoPresentacion,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:220,
                                                                                                    html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                                                                },
                                                                                                cmbMostrarVictima,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:250,
                                                                                                    html:'<b>Firmado por:</b>'
                                                                                                },
                                                                                                cmbFirmante ,
                                                                                                {
                                                                                                    x:10,
                                                                                                    y:280,
                                                                                                    id:'lblPuestoFirmante',
                                                                                                    hidden:true,
                                                                                                    html:'<b>Puesto del Firmante:</b>'
                                                                                                },
                                                                                                {
                                                                                                    x:160,
                                                                                                    y:275,
                                                                                                    hidden:true,
                                                                                                    width:350,
                                                                                                    id:'txtPuestoFirmante',
                                                                                                    xtype:'textfield'
                                                                                                } 
                                                                                        
                                                                                            ]
                                                                          },
                                                                          
                                                                          {
                                                                              xtype:'panel',
                                                                              layout:'absolute',
                                                                              defaultType: 'label',
                                                                              title:'Nuevas Medidas Cautelares',
                                                                              items:	[
                                                                                          {
                                                                                              x:10,
                                                                                              y:10,
                                                                                              html:'Seleccione las medidas cautelares que apliquen:'
                                                                                          },
                                                                                          crearGridRegistrosMCAdolescentesV2()
                                                                                          
                                                                                          
                                                                                      ]
                                                                          }
                                                            		]
                                                        }
                                            			
                                            			
                                            			
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Cumplimiento de OA y Modificaci&oacute;n de MC',
										width: 750,
										height:480,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia en la cual se imponen las medidas cautelares',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        
                                                                        if(cmbPeriodo.getValue()=='')
                                                                        {
                                                                        	function resp8()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbPeriodo.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el periodo en el cual el menor debe presentarse ante la unidad',resp8);
                                                                        	return;
                                                                        }
                                                                        var periodoPresentacionImputado=gEx('periodoPresentacionImputado');
                                                                        var fechaPresentacionImputado=gEx('fechaPresentacionImputado');
                                                                        if(cmbPeriodo.getValue()=='2')
                                                                        {
                                                                        	if(fechaPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp9()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    fechaPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar la fecha l&iacute;mite en la cual el menor debe presentarse ante la unidad',resp9);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                        	if(periodoPresentacionImputado.getValue()=='')
                                                                            {
                                                                                function resp10()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    periodoPresentacionImputado.focus();
                                                                                }
                                                                                msgBox('Debe indicar el periodo l&iacute;mite en el cual el menor debe presentarse ante la unidad',resp10);
                                                                                return;
                                                                            }
                                                                            
                                                                            if(cmbPeriodoPresentacion.getValue()=='')
                                                                            {
                                                                                function resp11()
                                                                                {
                                                                                    gEx('tabRegistros').setActiveTab(0);
                                                                                    cmbPeriodoPresentacion.focus();
                                                                                }
                                                                                msgBox('Debe indicar la periodicidad en la cual el menor debe presentarse ante la unidad',resp11);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }
                                                                        
                                                                        var listaMedidas='';
                                                                        
                                                                        var x;
                                                                        var fila;
                                                                        var o;
                                                                        for(x=0;x<gEx('gMedidaCautelar').getStore().getCount();x++)
                                                                        {
                                                                        	fila=gEx('gMedidaCautelar').getStore().getAt(x);
                                                                            o='{"idMedidaCautelar":"'+fila.data.idMedidaCautelar+'","detalles":"'+cv(fila.data.detallesAdicionales)+'"}';
                                                                            if(listaMedidas=='')
                                                                            	listaMedidas=o;
                                                                            else
                                                                            	listaMedidas+=','+o
                                                                        }
                                                                        
                                                                      	var listaMedidasActuales='';
                                                                        var pos;
                                                                        var arrFilas=[];
                                                                        for(x=0;x<gEx('txtMedidasCautelares').arrMedidas.length;x++)
                                                                        {
                                                                            iMedida=gEx('txtMedidasCautelares').arrMedidas[x];
                                                                            if(listaMedidasActuales=='')
                                                                            	listaMedidasActuales=iMedida;
                                                                            else
                                                                            	listaMedidasActuales+=','+iMedida;
                                                                            
                                                                            
                                                                        }
                                                                        
                                                                        if(listaMedidasActuales=='')
                                                                        {
                                                                        	
                                                                        	function resp120()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(0);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares actuales que el menor tiene impuestas',resp120);
                                                                        	return
                                                                        }
                                                                        
                                                                        if(listaMedidas=='')
                                                                        {
                                                                        	
                                                                        	function resp12()
                                                                            {
                                                                            	gEx('tabRegistros').setActiveTab(1);
                                                                            	
                                                                            }
                                                                        	msgBox('Debe indicar las medidas cautelares a informar',resp12);
                                                                        	return
                                                                        }


                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","medidadCautelares":['+listaMedidas+
                                                                                            '],"audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+'","tipoPeriodoLimite":"'+
                                                                                            cmbPeriodo.getValue()+'","fechaLimite":"'+
                                                                                            (fechaPresentacionImputado.getValue()!=''?fechaPresentacionImputado.getValue().format('Y-m-d'):'')+
                                                                                            '","periodoLimite":"'+periodoPresentacionImputado.getValue()+
                                                                                            '","plazoPeriodoLimite":"'+cmbPeriodoPresentacion.getValue()+
                                                                                            '","fechaVinculacion":"'+gEx('fechaVinculacion').getValue().format('Y-m-d')+
                                                                                            '","puestoFirmante":"'+cv(gEx('txtPuestoFirmante').getValue())+
                                                                                            '","listaMedidasActuales":"'+listaMedidasActuales+'"}';
                                                                        
																		
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
    
    
    gEx('txtMedidasCautelares').arrMedidas=[];
}

function mostrarVentanaSeleccionMedidasCautelares()
{
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'Seleccione las medidas cautelares actuales:'
                                                        },
                                                        crearGridMedidasCautelaresActuales()
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Seleccion de Medidas Cautelares',
										width: 700,
										height:400,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',                                                            
															handler: function()
																	{
																		var arrFilas=gEx('gMedidasCautelaresActuales').getSelectionModel().getSelections();
																		if(arrFilas.length==0)
                                                                        {
                                                                        	msgBox('Debe seleccionar las medidas cautelares actuales que el imputado tiene impuestas');
                                                                        	return;
                                                                        }
                                                                    	var arrMedidas=[];
                                                                        var x;
                                                                        var fila;
                                                                        for(x=0;x<arrFilas.length;x++)
                                                                        {
                                                                        	arrMedidas.push(arrFilas[x].data.idMedidaCautelar);
                                                                        }
                                                                        gEx('txtMedidasCautelares').arrMedidas=arrMedidas;
                                                                        gEx('txtMedidasCautelares').setValue(renderizarMedidasCautelares(arrMedidas));
                                                                        ventanaAM.close();
                                                                        
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();	
    
    var iMedida;
    var x;
    var pos;
    var arrFilas=[];
    for(x=0;x<gEx('txtMedidasCautelares').arrMedidas.length;x++)
    {
    	iMedida=gEx('txtMedidasCautelares').arrMedidas[x];
        
        pos=obtenerPosFila(gEx('gMedidasCautelaresActuales').getStore(),'idMedidaCautelar',iMedida);
        gEx('gMedidasCautelaresActuales').getSelectionModel().selectRecords([gEx('gMedidasCautelaresActuales').getStore().getAt(pos)],true);
        
        
    }
    
    
}

function crearGridMedidasCautelaresActuales()
{
	var dsDatos=arrMedidasCautelaresAdultoOTRO;
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                        			{name: 'idMedidaCautelar'},
                                                                    {name: 'medidaCautelar'}
                                                                    
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	var chkRow=new Ext.grid.CheckboxSelectionModel();
	
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														chkRow,
														{
															header:'Medida Cautelar',
															width:600,
															sortable:true,
															dataIndex:'medidaCautelar',
                                                            renderer:mostrarValorDescripcion
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            
                                                            store:alDatos,
                                                            frame:false,
                                                            x:10,
                                                            y:40,
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            id:'gMedidasCautelaresActuales',
                                                            columnLines : true,
                                                            height:260,
                                                            width:650,
                                                            sm:chkRow
                                                        }
                                                    );
	return 	tblGrid;
}


function renderizarMedidasCautelares(arrMedidas)
{
	var x;
    var pos;
    var leyenda='';
    var token;
    for(x=0;x<arrMedidas.length;x++)
    {
    	pos=existeValorMatriz(arrMedidasCautelaresAdultoOTRO,arrMedidas[x]);
        token=arrMedidasCautelaresAdultoOTRO[pos][2];
        if(leyenda=='')
        	leyenda=token;
        else
        	leyenda+=', '+token;
        
    }
    
    return leyenda;
}


function mostrarVentanaSeleccionCondicionesSCP()
{
	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'Seleccione las condiciones de SCP actuales:'
                                                        },
                                                        crearGridCondicionesSCP()
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Selecci&oacute;n de Condiciones de SCP',
										width: 700,
										height:400,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',                                                            
															handler: function()
																	{
																		var arrFilas=gEx('gCondicionesSuspencion').getSelectionModel().getSelections();
																		if(arrFilas.length==0)
                                                                        {
                                                                        	msgBox('Debe seleccionar las condiciones de SCP actuales que el imputado tiene impuestas');
                                                                        	return;
                                                                        }
                                                                    	var arrCondiciones=[];
                                                                        var x;
                                                                        var fila;
                                                                        for(x=0;x<arrFilas.length;x++)
                                                                        {
                                                                        	arrCondiciones.push(arrFilas[x].data.idCondicion);
                                                                        }
                                                                        gEx('txtCondicionesSCP').arrCondiciones=arrCondiciones;
                                                                        gEx('txtCondicionesSCP').setValue(renderizarCondicionesSuspencionCondicional(arrCondiciones));
                                                                        ventanaAM.close();
                                                                        
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();	
    
    var iCondicion;
    var x;
    var pos;
    var arrFilas=[];
    for(x=0;x<gEx('txtCondicionesSCP').arrCondiciones.length;x++)
    {
    	iCondicion=gEx('txtCondicionesSCP').arrCondiciones[x];
        
        pos=obtenerPosFila(gEx('gCondicionesSuspencion').getStore(),'idCondicion',iCondicion);
        gEx('gCondicionesSuspencion').getSelectionModel().selectRecords([gEx('gCondicionesSuspencion').getStore().getAt(pos)],true);
        
        
    }
    
    
}

function crearGridCondicionesSCP()
{
	var dsDatos=arrCondicionesSCAdultosOTRO;
    var alDatos=	new Ext.data.SimpleStore	(
                                                    {
                                                        fields:	[
                                                        			{name: 'idCondicion'},
                                                                    {name: 'condicionSCP'}
                                                                    
                                                                ]
                                                    }
                                                );

    alDatos.loadData(dsDatos);
	var chkRow=new Ext.grid.CheckboxSelectionModel();
	
	var cModelo= new Ext.grid.ColumnModel   	(
												 	[
													 	new  Ext.grid.RowNumberer(),
														chkRow,
														{
															header:'Condici&oacute;n SCP',
															width:600,
															sortable:true,
															dataIndex:'condicionSCP',
                                                            renderer:mostrarValorDescripcion
														}
													]
												);
                                                
	var tblGrid=	new Ext.grid.EditorGridPanel	(
                                                        {
                                                            
                                                            store:alDatos,
                                                            frame:false,
                                                            x:10,
                                                            y:40,
                                                            cm: cModelo,
                                                            stripeRows :true,
                                                            loadMask:true,
                                                            stripeRows :true,
                                                            id:'gCondicionesSuspencion',
                                                            columnLines : true,
                                                            height:260,
                                                            width:650,
                                                            sm:chkRow
                                                        }
                                                    );
	return 	tblGrid;
}


function renderizarCondicionesSuspencionCondicional(arrCondiciones)
{
	var x;
    var pos;
    var leyenda='';
    var token;
    for(x=0;x<arrCondiciones.length;x++)
    {
    	pos=existeValorMatriz(arrCondicionesSCAdultosOTRO,arrCondiciones[x]);
        token=arrCondicionesSCAdultosOTRO[pos][2];
        if(leyenda=='')
        	leyenda=token;
        else
        	leyenda+=', '+token;
        
    }
    
    return leyenda;
}

function mostrarInterfaceParametrosOficio_16(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,275,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,305,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                         {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Fecha de Auto Ejecutoria:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaAuto',
                                                            x:210,
                                                            y:155
                                                        },
                                                         {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Texto donde el juez deja subsistente las medidas cautelres o las suspende:</b>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            xtype:'textarea',
                                                            id:'textoJuez',
                                                            height:45,
                                                            width:650
                                                        },
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:310,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:340,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:335,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Sentencia firme por procedimiento abreviado',
										width: 700,
										height:440,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var fechaAuto=gEx('fechaAuto');
                                                                        if(fechaAuto.getValue()=='')
                                                                        {
                                                                        	function resp200()
                                                                            {
                                                                            	fechaAuto.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha del auto que causa ejecutoria',resp200);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","fechaAuto":"'+
                                                                                            gEx('fechaAuto').getValue().format('Y-m-d')+'","textoMedidas":"'+
                                                                                            cv(gEx('textoJuez').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_16A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,275,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,305,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                         {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Fecha de Auto Ejecutoria:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaAuto',
                                                            x:210,
                                                            y:155
                                                        },
                                                         {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Texto donde el juez deja subsistente las medidas cautelres o las suspende:</b>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            xtype:'textarea',
                                                            id:'textoJuez',
                                                            height:45,
                                                            width:650
                                                        },
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:310,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:340,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:335,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Sentencia firme por procedimiento abreviado',
										width: 700,
										height:440,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var fechaAuto=gEx('fechaAuto');
                                                                        if(fechaAuto.getValue()=='')
                                                                        {
                                                                        	function resp200()
                                                                            {
                                                                            	fechaAuto.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha del auto que causa ejecutoria',resp200);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","fechaAuto":"'+
                                                                                            gEx('fechaAuto').getValue().format('Y-m-d')+'","textoMedidas":"'+
                                                                                            cv(gEx('textoJuez').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_17(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,215,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,245,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Imputados:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                         {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Fecha de Auto Ejecutoria:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaAuto',
                                                            x:210,
                                                            y:155
                                                        },
                                                         {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Numeral plazo:</b>'
                                                        },
                                                        {
                                                        	x:210,
                                                            y:185,
                                                            xtype:'textfield',
                                                            id:'numeralPlazo',
                                                            width:80
                                                        },
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:275,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Sobreseimiento firme',
										width: 700,
										height:410,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un imputado involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var fechaAuto=gEx('fechaAuto');
                                                                        if(fechaAuto.getValue()=='')
                                                                        {
                                                                        	function resp200()
                                                                            {
                                                                            	fechaAuto.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha del auto que causa ejecutoria',resp200);
                                                                            return;
                                                                        }
                                                                        var numeralPlazo=gEx('numeralPlazo');
                                                                        if(numeralPlazo.getValue()=='')
                                                                        {
                                                                        	function resp201()
                                                                            {
                                                                            	numeralPlazo.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar el numeral que indica el plazo al que puede ser recurrido la setencia',resp201);
                                                                            return;
                                                                        }
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","fechaAuto":"'+
                                                                                            gEx('fechaAuto').getValue().format('Y-m-d')+'","numeralPlazo":"'+
                                                                                            cv(gEx('numeralPlazo').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_17A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,215,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,245,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                         {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Fecha de Auto Ejecutoria:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaAuto',
                                                            x:210,
                                                            y:155
                                                        },
                                                         {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Numeral plazo:</b>'
                                                        },
                                                        {
                                                        	x:210,
                                                            y:185,
                                                            xtype:'textfield',
                                                            id:'numeralPlazo',
                                                            width:80
                                                        },
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:275,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Sobreseimiento firme',
										width: 700,
										height:410,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }

                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var fechaAuto=gEx('fechaAuto');
                                                                        if(fechaAuto.getValue()=='')
                                                                        {
                                                                        	function resp200()
                                                                            {
                                                                            	fechaAuto.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha del auto que causa ejecutoria',resp200);
                                                                            return;
                                                                        }
                                                                        var numeralPlazo=gEx('numeralPlazo');
                                                                        if(numeralPlazo.getValue()=='')
                                                                        {
                                                                        	function resp201()
                                                                            {
                                                                            	numeralPlazo.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar el numeral que indica el plazo al que puede ser recurrido la setencia',resp201);
                                                                            return;
                                                                        }
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","fechaAuto":"'+
                                                                                            gEx('fechaAuto').getValue().format('Y-m-d')+'","numeralPlazo":"'+
                                                                                            cv(gEx('numeralPlazo').getValue())+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_18A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,275,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                         {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Comunidad de Internamiento:</b>'
                                                        },
                                                        {
                                                        	x:210,
                                                            y:185,
                                                            xtype:'textfield',
                                                            width:300,
                                                            id:'comunidadInternamiento'
                                                        },
                                                         {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Correo electr&oacute;nico de evaluaci&oacute;n:</b>'
                                                        },
                                                        {
                                                        	x:250,
                                                            y:215,
                                                            xtype:'textfield',
                                                            width:300,
                                                            id:'emailEvaluacion'
                                                        },
                                                         {
                                                        	x:10,
                                                            y:250,
                                                            html:'<b>Fecha l&iacute;mite de entrega de evaluaci&oacute;n:</b>'
                                                        },
                                                        {
                                                        	x:250,
                                                            y:245,
                                                            xtype:'datefield',
                                                            id:'fechaEvaluacion'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:310,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:305,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Registro de Antecedentes',
										width: 700,
										height:420,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var comunidadInternamiento=gEx('comunidadInternamiento');
                                                                        
                                                                        if(comunidadInternamiento.getValue()=='')
                                                                        {
                                                                            function resp71()
                                                                            {
                                                                                comunidadInternamiento.focus();
                                                                            }
                                                                            msgBox('Debe indicar la comunidad de internamiento del menor',resp71);
                                                                            return;
                                                                        }
                                                                        
                                                                        var emailEvaluacion=gEx('emailEvaluacion');
                                                                        
                                                                        
                                                                        if(emailEvaluacion.getValue()=='')
                                                                        {
                                                                            function resp72()
                                                                            {
                                                                                emailEvaluacion.focus();
                                                                            }
                                                                            msgBox('Debe indicar la direcci&oacute;n de correo electr&oacute;nico de evaluaci&oacute;n',resp72);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(!validarCorreo(emailEvaluacion.getValue()))
                                                                        {
                                                                        	function resp73()
                                                                            {
                                                                                emailEvaluacion.focus();
                                                                            }
                                                                            msgBox('La direcci&oacute;n de correo electr&oacute;nico de evaluaci&oacute;n ingresada no es v&aacute;lida',resp73);
                                                                            return;
                                                                        }
                                                                        
                                                                        var fechaEvaluacion=gEx('fechaEvaluacion'); 
                                                                        if(fechaEvaluacion.getValue()=='')
                                                                        {
                                                                            function resp74()
                                                                            {
                                                                                fechaEvaluacion.focus();
                                                                            }
                                                                            msgBox('Debe indicar la fecha l&iacute;mite de entrega de evaluaci&oacute;n',resp74);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","comunidadInternamiento":"'+
                                                                                            (comunidadInternamiento.getValue())+'","emailEvaluacion":"'+cv(emailEvaluacion.getValue())+
                                                                                            '","fechaEvaluacion":"'+fechaEvaluacion.getValue().format('Y-m-d')+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}


function mostrarInterfaceParametrosOficio_19A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbAudienciaCelebrar=crearComboExt('cmbAudienciaCelebrar',arrAudienciasCarpetaV2,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,245,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var arrTipoTratamiento=[['1','Residencial'],['2','Ambulatoria']];
	var cmbTipoTratamiento=crearComboExt('cmbTipoTratamiento',arrTipoTratamiento,180,215,180);

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Audiencia celebrada:</b>'
                                                        },
                                                        cmbAudienciaCelebrar,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                         {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Cl&iacute;nica donde se valor&oacute;:</b>'
                                                        },
                                                        {
                                                        	x:210,
                                                            y:185,
                                                            xtype:'textfield',
                                                            width:300,
                                                            id:'clinicaValoracion'
                                                        },
                                                         {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Tipo de tratamiento:</b>'
                                                        },
                                                        cmbTipoTratamiento,
                                                         
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:280,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:275,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Registro de Antecedentes',
										width: 700,
										height:390,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbAudienciaCelebrar.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbAudienciaCelebrar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar la audiencia a celebrar',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                        var clinicaValoracion=gEx('clinicaValoracion');
                                                                        
                                                                        if(clinicaValoracion.getValue()=='')
                                                                        {
                                                                            function resp71()
                                                                            {
                                                                                clinicaValoracion.focus();
                                                                            }
                                                                            msgBox('Debe indicar la cl&iacute;nica donde se valor&oacute; al menor',resp71);
                                                                            return;
                                                                        }
                                                                        
                                                                        var cmbTipoTratamiento=gEx('cmbTipoTratamiento');
                                                                        
                                                                        
                                                                        if(cmbTipoTratamiento.getValue()=='')
                                                                        {
                                                                            function resp72()
                                                                            {

                                                                                cmbTipoTratamiento.focus();
                                                                            }
                                                                            msgBox('Debe indicar el tipo de tratamiento requerido para el menor',resp72);
                                                                            return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","audienciaCelebrar":"'+cmbAudienciaCelebrar.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","clinicaValoracion":"'+
                                                                                            (clinicaValoracion.getValue())+'","cmbTipoTratamiento":"'+cv(cmbTipoTratamiento.getValue())+
                                                                                            '"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}

function mostrarInterfaceParametrosOficio_20A(cadObj,ventana)
{
	objGlobalInfoDocumento=eval('['+decodeURIComponent(cadObj)+']')[0];

	if(ventana)
		ventana.close();
	var cmbJuecesOrdena=crearComboExt('cmbJuecesOrdena',arrJueces,160,95,400);
    var cmbMostrarVictima=crearComboExt('cmbMostrarVictima',arrMostrarVictima,180,155,400);
    cmbMostrarVictima.setValue('1');
    var cmbImputados=crearComboExt('cmbImputados',arrImputados,160,65,300);
	if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
    }
    
    var aFirmantes=[];
    var x;
    aFirmantes.push(['0','Usuario Actual']);
    for(x=0;x<arrFirmantes.length;x++)
    {
	    aFirmantes.push(arrFirmantes[x]);
    }
    var cmbFirmante=crearComboExt('cmbFirmante',aFirmantes,180,215,400);

	var existeUsuario=false;
    if(existeValorMatriz(aFirmantes,'<?php echo $_SESSION["idUsr"]?>')==-1)
    {
    	cmbFirmante.setValue('0');
    }
    else
    {
    	cmbFirmante.setValue('<?php echo $_SESSION["idUsr"]?>');
    }
    
    cmbFirmante.on('select',function(cmb,registro)
    						{	
                            	if(registro.data.id=='0')
                                {
                                	gEx('lblPuestoFirmante').show();
                                    gEx('txtPuestoFirmante').show();
                                }
                                else
                                {
                                	gEx('lblPuestoFirmante').hide();
                                    gEx('txtPuestoFirmante').hide();
                                }
                            }
    				)

	var form = new Ext.form.FormPanel(	
										{
											baseCls: 'x-plain',
											layout:'absolute',
											defaultType: 'label',
											items: 	[
                                            			{
                                                        	x:10,
                                                            y:10,
                                                            html:'<b>No de oficio a asignar:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:5,
                                                            xtype:'numberfield',
                                                            id:'txtNoOficioAsignar',
                                                            allowDecimals:false,
                                                            allowNegative:false,
                                                            width:100
                                                        },
                                            			{
                                                        	x:10,
                                                            y:40,
                                                            html:'<b>Carpeta Judicial:</b>'
                                                        },
                                                        {
                                                        	x:160,
                                                            y:40,
                                                            html:'<span style="color: #900"><b>'+carpetaAdministrativa+'</b></span>'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:70,
                                                            html:'<b>Menores:</b>'
                                                        },
                                                        cmbImputados,
                                                        {
                                                        	x:10,
                                                            y:100,
                                                            html:'<b>Juez que ordena:</b>'
                                                        },
                                                        cmbJuecesOrdena,
                                                        {
                                                        	x:10,
                                                            y:130,
                                                            html:'<b>Fecha de Viculaci&oacute;n a Proceso:</b>'
                                                        },
                                                        {
                                                        	xtype:'datefield',
                                                            id:'fechaVinculacion',
                                                            x:210,
                                                            y:125,
                                                            value:fechaVinculacion
                                                        },
                                                        {
                                                        	x:10,
                                                            y:160,
                                                            html:'<b>Mostrar v&iacute;ctimas como:</b>'
                                                        },
                                                        cmbMostrarVictima,
                                                         
                                                         {
                                                        	x:10,
                                                            y:190,
                                                            html:'<b>Fecha de imposici&oacute;n de condiciones:</b>'
                                                        },
                                                        {
                                                        	x:250,
                                                            y:185,
                                                            xtype:'datefield',
                                                            id:'fechaCondiciones'
                                                        },
                                                        {
                                                        	x:10,
                                                            y:220,
                                                            html:'<b>Firmado por:</b>'
                                                        },
                                                        cmbFirmante,
                                                        {
                                                        	x:10,
                                                            y:250,
                                                            id:'lblPuestoFirmante',
                                                            hidden:true,
                                                            html:'<b>Puesto del Firmante:</b>'
                                                        },
                                                        {
                                                        	x:180,
                                                            y:245,
                                                            hidden:true,
                                                            width:350,
                                                            id:'txtPuestoFirmante',
                                                            xtype:'textfield'
                                                        }
													]
										}
									);
	
	var ventanaAM = new Ext.Window(
									{
										title: 'Solicitud de Registro de Antecedentes',
										width: 700,
										height:360,
										layout: 'fit',
										plain:true,
										modal:true,
										bodyStyle:'padding:5px;',
										buttonAlign:'center',
										items: form,
										listeners : {
													show : {
																buffer : 10,
																fn : function() 
																{
                                                                	gEx('txtNoOficioAsignar').focus(false,500);
																}
															}
												},
										buttons:	[
														{
															
															text: '<?php echo $etj["lblBtnAceptar"]?>',
                                                            
															handler: function()
																	{
																		var txtNoOficioAsignar=gEx('txtNoOficioAsignar');
                                                                        var imputados=cmbImputados.getValue();
                                                                        
                                                                        if(txtNoOficioAsignar.getValue()=='')
                                                                        {
                                                                        	function resp1()
                                                                            {
                                                                            	txtNoOficioAsignar.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el folio del oficio a asignar',resp1);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(imputados=='')
                                                                        {
                                                                        	function resp2()
                                                                            {
                                                                            	cmbImputados.focus();
                                                                            }
                                                                        	msgBox('Debe indicar almenos un menor involucrado en el asunto',resp2);
                                                                        	return;
                                                                        }
                                                                        
                                                                        if(cmbJuecesOrdena.getValue()=='')
                                                                        {
                                                                        	function resp3()
                                                                            {
                                                                            	cmbJuecesOrdena.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el juez que ordena el informe',resp3);
                                                                        	return;
                                                                        }
                                                                        
                                                                        var fechaVinculacion=gEx('fechaVinculacion');
                                                                        if(fechaVinculacion.getValue()=='')
                                                                        {
                                                                        	function resp20()
                                                                            {
                                                                            	fechaVinculacion.focus();
                                                                            }
                                                                            mxgBox('Debe ingresar la fecha de vinculaci&oacute;n a proceso',resp20);
                                                                            return;
                                                                        }
                                                                        
                                                                       
                                                                        
                                                                        var fechaCondiciones=gEx('fechaCondiciones'); 
                                                                        if(fechaCondiciones.getValue()=='')
                                                                        {
                                                                            function resp74()
                                                                            {
                                                                                fechaCondiciones.focus();
                                                                            }
                                                                            msgBox('Debe indicar la fecha en que fueron impuestas las condiciones',resp74);
                                                                            return;
                                                                        }
                                                                        
                                                                        if(cmbFirmante.getValue()=='')
                                                                        {
                                                                        	function resp6()
                                                                            {
                                                                            	cmbFirmante.focus();
                                                                            }
                                                                        	msgBox('Debe indicar el nombre del firmante del oficio',resp6);
                                                                        	return;
                                                                        }
                                                                        
                                                                        
                                                                        if(cmbFirmante.getValue()=='0')
                                                                        {
                                                                        	if(gEx('txtPuestoFirmante').getValue()=='')
                                                                            {
                                                                            	function resp7()
                                                                                {
                                                                                    gEx('txtPuestoFirmante').focus();
                                                                                }
                                                                                msgBox('Debe indicar el puesto que obstenta el firmante del oficio',resp7);
                                                                                return;
                                                                            }
                                                                        }

                                                                        var cadParametros='{"noOficioAsignar":"'+txtNoOficioAsignar.getValue()+'","carpetaJudicial":"'+
                                                                        					carpetaAdministrativa+'","idCarpeta":"'+idCarpeta+'","imputados":"'+imputados+
                                                                                            '","juezOrdena":"'+cmbJuecesOrdena.getValue()+
                                                                                            '","mostrarVictimasComo":"'+cmbMostrarVictima.getValue()+'","firmante":"'+
                                                                                            cmbFirmante.getValue()+'","fechaVinculacion":"'+
                                                                                            gEx('fechaVinculacion').getValue().format('Y-m-d')+'","puestoFirmante":"'+
                                                                                            cv(gEx('txtPuestoFirmante').getValue())+'","fechaCondiciones":"'+
                                                                                            fechaCondiciones.getValue().format('Y-m-d')+'"}';
                                                                        
																	
                                                                    	guardarDatosDocumento(cadObj,cadParametros,ventanaAM);
                                                                    
                                                                    }
														},
														{
															text: '<?php echo $etj["lblBtnCancelar"]?>',
															handler:function()
																	{
																		ventanaAM.close();
																	}
														}
													]
									}
								);
	ventanaAM.show();
    dispararEventoSelectCombo('cmbFirmante');
    if(cmbImputados.getStore().getCount()==1)
    {
    	var x=0;
    	cmbImputados.setValue(cmbImputados.getStore().getAt(x).data.id);
        dispararEventoSelectCombo('cmbImputados');
    }
}
